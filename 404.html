<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>lulzx</title>
<script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
<script src="https://unpkg.com/vue-router@4/dist/vue-router.global.js"></script>
<style>
:root {
    --gray-subtle: #e5e5e5;
    --gray-mid: #999;
    --gray-light: #f5f5f5;
}

* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

::selection {
    background: #000;
    color: #fff;
}

html {
    font-size: 16px;
}

body {
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
    background: #fff;
    color: #000;
    line-height: 1.6;
    min-height: 100vh;
}

.container {
    min-height: 100vh;
    display: flex;
    flex-direction: column;
    border: 2px solid #000;
    margin: 1rem;
}

.main {
    flex: 1;
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 4rem 6rem;
    border-bottom: 2px solid #000;
}

.statement {
    font-size: clamp(1.5rem, 4vw, 3.5rem);
    font-weight: 500;
    max-width: 1200px;
    letter-spacing: -0.03em;
    line-height: 1.45;
    text-wrap: balance;
}

.word {
    display: inline-block;
    cursor: pointer;
    padding: 0 0.1em;
    margin: 0 -0.1em;
    border-radius: 0;
    transition: all 0.15s ease;
    text-decoration: none;
    color: inherit;
    text-decoration-line: underline;
    text-decoration-color: var(--gray-subtle);
    text-underline-offset: 3px;
    text-decoration-thickness: 1px;
}

.word:hover {
    background: #000;
    color: #fff;
    text-decoration: none;
    transform: scale(1.02);
}

.punctuation {
    display: inline;
}

.footer {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 1rem 2rem;
    font-size: 0.875rem;
    border-top: 2px solid #000;
}

.footer a {
    color: #000;
    text-decoration: underline;
    text-underline-offset: 2px;
}

.footer a:hover {
    background: #000;
    color: #fff;
    text-decoration: none;
}

.footer-links {
    display: flex;
    gap: 1rem;
    flex-wrap: wrap;
}

/* Word Page Styles */
.word-page {
    flex: 1;
    border: 2px solid #000;
    margin: 1rem;
    display: flex;
    flex-direction: column;
    animation: fadeIn 0.3s ease;
}

@keyframes fadeIn {
    from { opacity: 0; transform: translateY(10px); }
    to { opacity: 1; transform: translateY(0); }
}

@keyframes blockIn {
    from { opacity: 0; transform: translateY(16px); }
    to { opacity: 1; transform: translateY(0); }
}

.word-header {
    padding: 1.5rem 2rem;
    border-bottom: 2px solid #000;
    display: flex;
    justify-content: space-between;
    align-items: center;
}

.word-header-left {
    display: flex;
    align-items: center;
    gap: 1rem;
}

.breadcrumbs {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    font-size: 0.8rem;
    color: var(--gray-mid);
}

.breadcrumbs a {
    color: var(--gray-mid);
    text-decoration: none;
}

.breadcrumbs a:hover {
    color: #000;
}

.breadcrumbs .sep {
    font-size: 0.7rem;
}

.back {
    color: #000;
    text-decoration: none;
    font-size: 0.875rem;
}

.back:hover {
    background: #000;
    color: #fff;
}

.word-title-section {
    padding: 3rem 4rem;
    border-bottom: 2px solid #000;
    display: flex;
    align-items: baseline;
    gap: 1.5rem;
    flex-wrap: wrap;
}

.word-title {
    font-size: clamp(3rem, 10vw, 8rem);
    font-weight: 700;
    letter-spacing: -0.04em;
    line-height: 1;
}

.stage-badge {
    display: inline-block;
    font-size: 0.75rem;
    text-transform: uppercase;
    letter-spacing: 0.12em;
    padding: 0.25rem 0.75rem;
    vertical-align: middle;
}

.stage-seed {
    border: 1px dashed #000;
}

.stage-sprout {
    border: 2px solid #000;
}

.stage-evergreen {
    border: 4px double #000;
}

.word-meta {
    font-size: 0.8rem;
    color: var(--gray-mid);
    padding: 0.75rem 4rem;
    border-bottom: 1px solid var(--gray-subtle);
    display: flex;
    gap: 2rem;
}

.word-content {
    flex: 1;
    padding: 3rem 4rem;
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
    gap: 2rem;
    align-content: start;
}

.block {
    border: 2px solid #000;
    padding: 2rem;
    transition: transform 0.2s ease, box-shadow 0.2s ease;
    animation: blockIn 0.4s ease both;
}

.block:nth-child(1) { animation-delay: 0s; }
.block:nth-child(2) { animation-delay: 0.05s; }
.block:nth-child(3) { animation-delay: 0.1s; }
.block:nth-child(4) { animation-delay: 0.15s; }
.block:nth-child(5) { animation-delay: 0.2s; }
.block:nth-child(6) { animation-delay: 0.25s; }

.block:hover {
    transform: translateY(-2px);
    box-shadow: 4px 4px 0 #000;
}

.block h2 {
    font-size: 0.875rem;
    text-transform: uppercase;
    letter-spacing: 0.1em;
    margin-bottom: 1rem;
    padding-bottom: 1rem;
    border-bottom: 1px solid #000;
}

.block p, .block li {
    font-size: 1rem;
    line-height: 1.7;
    margin-bottom: 0.75rem;
}

.block ul {
    list-style: none;
    padding: 0;
}

.block li::before {
    content: "\2192  ";
    font-weight: 700;
}

.block a {
    color: #000;
    text-decoration: underline;
}

.block a:hover {
    background: #000;
    color: #fff;
}

.block-inverted {
    background: #000;
    color: #fff;
    border-color: #000;
}

.block-inverted h2 {
    border-bottom-color: #fff;
}

.block-inverted a {
    color: #fff;
}

.block-inverted a:hover {
    background: #fff;
    color: #000;
}

.stat {
    font-size: 4rem;
    font-weight: 700;
    margin-bottom: 0.5rem;
}

.stat-label {
    font-size: 0.875rem;
    text-transform: uppercase;
    letter-spacing: 0.1em;
}

.zero {
    font-size: 8rem;
    font-weight: 900;
    line-height: 1;
}

.block-zero {
    grid-column: 1 / -1;
}

code {
    font-family: "Courier New", monospace;
    background: var(--gray-light);
    padding: 0.2em 0.4em;
    font-size: 0.9em;
}

/* Connections Section */
.connections-section,
.notes-section {
    padding: 2rem 4rem;
    border-top: 2px solid #000;
}

.section-title {
    font-size: 0.875rem;
    text-transform: uppercase;
    letter-spacing: 0.1em;
    margin-bottom: 1.25rem;
}

.chips {
    display: flex;
    flex-wrap: wrap;
    gap: 0.5rem;
}

.chip {
    display: inline-block;
    padding: 0.4rem 1rem;
    border: 2px solid #000;
    text-decoration: none;
    color: #000;
    font-size: 0.875rem;
    transition: all 0.15s ease;
    letter-spacing: -0.01em;
}

.chip:hover {
    background: #000;
    color: #fff;
    transform: translateY(-2px);
    box-shadow: 2px 2px 0 #000;
}

.note-link {
    display: block;
    padding: 1rem 1.5rem;
    border: 2px solid #000;
    text-decoration: none;
    color: #000;
    margin-bottom: 0.5rem;
    transition: all 0.15s ease;
    font-size: 0.95rem;
}

.note-link:hover {
    transform: translateX(4px);
    box-shadow: 2px 2px 0 #000;
}

.note-link .note-link-title {
    font-weight: 600;
}

.note-link .note-link-stage {
    font-size: 0.75rem;
    color: var(--gray-mid);
    text-transform: uppercase;
    letter-spacing: 0.08em;
    margin-left: 0.75rem;
}

.wander-section {
    padding: 1.5rem 4rem;
    border-top: 2px solid #000;
    display: flex;
    justify-content: flex-end;
}

.wander-btn {
    color: #000;
    text-decoration: none;
    font-size: 0.875rem;
    text-decoration: underline;
    text-decoration-style: dashed;
    text-underline-offset: 3px;
    padding: 0.25rem 0.5rem;
    transition: all 0.15s ease;
    cursor: pointer;
    background: none;
    border: none;
    font-family: inherit;
}

.wander-btn:hover {
    background: #000;
    color: #fff;
    text-decoration: none;
}

/* Inline word link */
.inline-word-link {
    color: #000;
    text-decoration: underline;
    text-decoration-color: var(--gray-subtle);
    text-underline-offset: 2px;
    text-decoration-thickness: 1px;
    transition: all 0.1s ease;
}

.inline-word-link:hover {
    background: #000;
    color: #fff;
    text-decoration: none;
}

/* Note Page Styles */
.note-page {
    flex: 1;
    border: 2px solid #000;
    margin: 1rem;
    display: flex;
    flex-direction: column;
    animation: fadeIn 0.3s ease;
}

.note-header {
    padding: 3rem 4rem;
    border-bottom: 2px solid #000;
}

.note-title {
    font-size: clamp(2rem, 5vw, 3.5rem);
    font-weight: 700;
    letter-spacing: -0.03em;
    line-height: 1.15;
    margin-bottom: 1rem;
}

.note-meta {
    font-size: 0.8rem;
    color: var(--gray-mid);
    display: flex;
    gap: 2rem;
    align-items: center;
}

.note-body {
    padding: 3rem 4rem;
    max-width: 760px;
    font-size: 1.05rem;
    line-height: 1.8;
    border-bottom: 2px solid #000;
}

.note-body p {
    margin-bottom: 1.5rem;
}

.note-body h2 {
    font-size: 1.25rem;
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 0.05em;
    margin-top: 3rem;
    margin-bottom: 1rem;
    padding-bottom: 0.75rem;
    border-bottom: 1px solid #000;
}

.note-body ul, .note-body ol {
    margin-bottom: 1.5rem;
    padding-left: 1.5rem;
}

.note-body li {
    margin-bottom: 0.5rem;
}

.note-body blockquote {
    border-left: 4px solid #000;
    padding-left: 1.5rem;
    margin: 2rem 0;
    font-style: italic;
    color: var(--gray-mid);
    font-size: 1.1rem;
}

.note-body strong {
    font-weight: 700;
}

.note-body pre {
    background: #000;
    color: #fff;
    padding: 1.5rem;
    margin: 1.5rem 0;
    overflow-x: auto;
    font-size: 0.9rem;
    line-height: 1.6;
    border: 2px solid #000;
}

.note-body pre code {
    background: none;
    color: #fff;
    padding: 0;
    font-size: inherit;
}

.note-body code {
    font-family: "Courier New", monospace;
    background: var(--gray-light);
    padding: 0.15em 0.4em;
    font-size: 0.9em;
    border: 1px solid var(--gray-subtle);
}

.note-connections {
    padding: 2rem 4rem;
    border-bottom: 2px solid #000;
}

.note-related {
    padding: 2rem 4rem;
    border-bottom: 2px solid #000;
}

/* Garden Map Styles */
.garden-page {
    flex: 1;
    border: 2px solid #000;
    margin: 1rem;
    display: flex;
    flex-direction: column;
    animation: fadeIn 0.3s ease;
}

.garden-header {
    padding: 3rem 4rem;
    border-bottom: 2px solid #000;
}

.garden-title {
    font-size: clamp(2.5rem, 6vw, 5rem);
    font-weight: 700;
    letter-spacing: -0.04em;
    line-height: 1;
    margin-bottom: 1rem;
}

.garden-subtitle {
    font-size: 1rem;
    color: var(--gray-mid);
    max-width: 500px;
}

.garden-filters {
    padding: 1.25rem 4rem;
    border-bottom: 2px solid #000;
    display: flex;
    gap: 0.5rem;
    flex-wrap: wrap;
}

.filter-btn {
    padding: 0.35rem 1rem;
    border: 2px solid #000;
    background: #fff;
    color: #000;
    font-family: inherit;
    font-size: 0.8rem;
    text-transform: uppercase;
    letter-spacing: 0.08em;
    cursor: pointer;
    transition: all 0.15s ease;
}

.filter-btn:hover,
.filter-btn.active {
    background: #000;
    color: #fff;
}

.garden-section {
    padding: 2rem 4rem;
    border-bottom: 2px solid #000;
}

.garden-section-title {
    font-size: 0.875rem;
    text-transform: uppercase;
    letter-spacing: 0.1em;
    margin-bottom: 1.5rem;
    padding-bottom: 0.75rem;
    border-bottom: 1px solid #000;
}

.garden-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
    gap: 0.75rem;
}

.garden-card {
    border: 2px solid #000;
    padding: 1rem 1.25rem;
    text-decoration: none;
    color: #000;
    transition: all 0.15s ease;
    display: flex;
    flex-direction: column;
    gap: 0.5rem;
    animation: blockIn 0.3s ease both;
}

.garden-card:nth-child(1) { animation-delay: 0s; }
.garden-card:nth-child(2) { animation-delay: 0.02s; }
.garden-card:nth-child(3) { animation-delay: 0.04s; }
.garden-card:nth-child(4) { animation-delay: 0.06s; }
.garden-card:nth-child(5) { animation-delay: 0.08s; }
.garden-card:nth-child(6) { animation-delay: 0.1s; }
.garden-card:nth-child(7) { animation-delay: 0.12s; }
.garden-card:nth-child(8) { animation-delay: 0.14s; }
.garden-card:nth-child(9) { animation-delay: 0.16s; }
.garden-card:nth-child(10) { animation-delay: 0.18s; }
.garden-card:nth-child(11) { animation-delay: 0.2s; }
.garden-card:nth-child(12) { animation-delay: 0.22s; }

.garden-card:hover {
    transform: translateY(-2px);
    box-shadow: 4px 4px 0 #000;
}

.garden-card-name {
    font-weight: 700;
    font-size: 1.1rem;
    letter-spacing: -0.02em;
}

.garden-card-meta {
    display: flex;
    justify-content: space-between;
    align-items: center;
    font-size: 0.75rem;
    color: var(--gray-mid);
}

.stage-dot {
    display: inline-block;
    width: 8px;
    height: 8px;
    border-radius: 50%;
    vertical-align: middle;
}

.stage-dot-seed {
    border: 1px dashed #000;
    background: transparent;
}

.stage-dot-sprout {
    border: 1.5px solid #000;
    background: transparent;
}

.stage-dot-evergreen {
    background: #000;
}

.garden-notes-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
    gap: 0.75rem;
}

.garden-note-card {
    border: 2px solid #000;
    padding: 1.25rem 1.5rem;
    text-decoration: none;
    color: #000;
    transition: all 0.15s ease;
    animation: blockIn 0.3s ease both;
}

.garden-note-card:hover {
    transform: translateX(4px);
    box-shadow: 2px 2px 0 #000;
}

.garden-note-title {
    font-weight: 700;
    font-size: 1rem;
    margin-bottom: 0.5rem;
    letter-spacing: -0.01em;
}

.garden-note-meta {
    font-size: 0.75rem;
    color: var(--gray-mid);
    display: flex;
    gap: 1rem;
    align-items: center;
}

/* Responsive */
@media (max-width: 800px) {
    .main {
        padding: 3rem;
    }
    .word-title-section {
        padding: 2rem 2.5rem;
    }
    .word-content,
    .connections-section,
    .notes-section,
    .wander-section,
    .note-header,
    .note-body,
    .note-connections,
    .note-related,
    .garden-header,
    .garden-filters,
    .garden-section {
        padding-left: 2.5rem;
        padding-right: 2.5rem;
    }
    .word-meta {
        padding-left: 2.5rem;
        padding-right: 2.5rem;
    }
}

@media (max-width: 500px) {
    .container {
        margin: 0.5rem;
    }
    .main {
        padding: 1.5rem;
    }
    .footer {
        flex-direction: column;
        gap: 0.75rem;
        text-align: center;
    }
    .footer-links {
        justify-content: center;
    }
    .word-title-section {
        padding: 1.5rem;
    }
    .word-title {
        font-size: clamp(2.5rem, 15vw, 5rem);
    }
    .word-content,
    .connections-section,
    .notes-section,
    .wander-section,
    .note-header,
    .note-body,
    .note-connections,
    .note-related,
    .garden-header,
    .garden-filters,
    .garden-section {
        padding-left: 1.5rem;
        padding-right: 1.5rem;
    }
    .word-meta {
        padding-left: 1.5rem;
        padding-right: 1.5rem;
        flex-wrap: wrap;
        gap: 0.5rem;
    }
    .word-content {
        grid-template-columns: 1fr;
    }
    .garden-grid {
        grid-template-columns: repeat(auto-fill, minmax(140px, 1fr));
    }
    .garden-notes-grid {
        grid-template-columns: 1fr;
    }
    .breadcrumbs {
        display: none;
    }
    .word-header {
        padding: 1rem 1.5rem;
    }
    .note-meta {
        flex-wrap: wrap;
        gap: 0.5rem;
    }
}
</style>
</head>
<body>
<div id="app"></div>

<script>
const { createApp, computed, ref, watch, onMounted } = Vue;
const { createRouter, createWebHistory, useRoute, useRouter } = VueRouter;

// Grammar words to skip for inline linking
const SKIP_WORDS = new Set(['the', 'of', 'at', 'and', 'that', 'not', 'just', 'where']);

// All word keys for wander
const ALL_WORDS = () => Object.keys(wordData);

// Time ago helper
function timeAgo(dateStr) {
    if (!dateStr) return '';
    const [y, m] = dateStr.split('-').map(Number);
    const planted = new Date(y, m - 1);
    const now = new Date();
    const months = (now.getFullYear() - planted.getFullYear()) * 12 + (now.getMonth() - planted.getMonth());
    if (months < 1) return 'this month';
    if (months === 1) return '1 month ago';
    if (months < 12) return months + ' months ago';
    const years = Math.floor(months / 12);
    if (years === 1) return '1 year ago';
    return years + ' years ago';
}

// Breadcrumb trail
function getTrail() {
    try {
        return JSON.parse(sessionStorage.getItem('garden-trail') || '[]');
    } catch { return []; }
}
function addToTrail(word) {
    let trail = getTrail();
    trail = trail.filter(w => w !== word);
    trail.push(word);
    if (trail.length > 5) trail = trail.slice(-5);
    sessionStorage.setItem('garden-trail', JSON.stringify(trail));
}

// Word data store
const wordData = {
    building: {
        related: ['systems', 'source', 'adapt', 'from'],
        stage: 'evergreen',
        planted: '2017-01',
        tended: '2025-12',
        blocks: [
            {
                title: "Current Projects",
                items: [
                    "copilot — CLI Copilot in Rust",
                    "orbit — Spatial Terminal Dashboard",
                    "speculative-decoding — Fast LLM on Apple Silicon",
                    "paddleocr-vl.swift — OCR with MLX",
                    "tanstack-bun — SSR with Bun"
                ]
            },
            {
                title: "Focus Areas",
                items: [
                    "ML Inference — MLX-Swift, Apple Silicon",
                    "Developer Tools — Rust CLI, TUIs",
                    "Web & Graphics — WebGL2/WebGPU",
                    "Automation — Telegram bots"
                ]
            },
            {
                title: "Stats",
                items: [
                    "30+ public repositories",
                    "9 languages",
                    "First commit: 2017",
                    "7+ years shipping code"
                ]
            }
        ]
    },
    at: {
        related: ['from', 'building', 'the'],
        stage: 'seed',
        planted: '2025-01',
        tended: '2025-01',
        blocks: [
            { title: "Location", text: "Software engineer from India. Building developer tools, ML inference systems, and automation that works." }
        ]
    },
    the: {
        related: ['of', 'and'],
        stage: 'seed',
        planted: '2025-01',
        tended: '2025-01',
        blocks: [
            { title: "Definite Article", text: "The most common word in English. Used here to specify a particular intersection." }
        ]
    },
    intersection: {
        related: ['computation', 'cognition', 'first', 'principles'],
        stage: 'sprout',
        planted: '2024-06',
        tended: '2025-06',
        blocks: [
            { title: "Where Fields Meet", text: "The space where computation, cognition, and first principles overlap. This intersection is where novel insights emerge." },
            {
                title: "Cross-Disciplinary Insights",
                items: ["Neural computation theory", "Cognitive architectures", "Verified AI systems", "Principled machine learning"]
            }
        ]
    },
    of: {
        related: ['the', 'and', 'at'],
        stage: 'seed',
        planted: '2025-01',
        tended: '2025-01',
        blocks: [
            { title: "Preposition", text: "Expressing the relationship between a part and a whole. The intersection is composed of these elements." }
        ]
    },
    computation: {
        related: ['cognition', 'systems', 'parallel', 'runtimes', 'execute', 'reason'],
        stage: 'evergreen',
        planted: '2020-03',
        tended: '2025-12',
        blocks: [
            { title: "ML Inference", text: "Making LLMs run fast on consumer hardware. Native Swift implementations using MLX for Apple Silicon." },
            {
                title: "Projects",
                items: ["speculative-decoding — MLX-Swift port", "nano-reasoning — FastRL on Apple Silicon", "paddleocr-vl.swift — 0.9B doc parsing VLM", "masked — Masked diffusion LM"]
            },
            {
                title: "Hardware Targets",
                items: ["Apple Silicon (MLX)", "GPU — WebGL2/WebGPU", "CPU — Rust simd optimization"]
            }
        ]
    },
    cognition: {
        related: ['computation', 'learn', 'adapt', 'reason', 'systems'],
        stage: 'evergreen',
        planted: '2020-06',
        tended: '2025-10',
        blocks: [
            { title: "neurodiverse", text: "Research and Development for AI powered Memory Prosthetics. Exploring how systems can learn and adapt." },
            {
                title: "Memory Systems",
                items: ["Information retrieval", "Similarity search (HNSW)", "Semantic embeddings", "Long-term context"]
            },
            {
                title: "Projects",
                items: ["sentence-similarity-search", "discover — search engine", "masked — diffusion LM"]
            }
        ]
    },
    and: {
        related: ['of', 'the', 'at'],
        stage: 'seed',
        planted: '2025-01',
        tended: '2025-01',
        blocks: [
            { title: "Conjunction", text: "Connects words, phrases, or clauses. Indicates addition or connection between concepts." }
        ]
    },
    first: {
        related: ['principles', 'foundations', 'reason'],
        stage: 'seed',
        planted: '2023-01',
        tended: '2025-06',
        blocks: [
            { title: "First Principles Thinking", text: "Break down problems to their fundamental truths. Build up from there. Don't reason by analogy." },
            {
                title: "Process",
                items: ["Identify the problem", "Break into components", "Find fundamental truths", "Build from ground up", "Verify each step"]
            },
            {
                title: "Applications",
                items: ["Compiler design", "System architecture", "Algorithm invention", "Language creation"]
            }
        ]
    },
    principles: {
        related: ['first', 'minimal', 'foundations', 'verifiable', 'everything'],
        stage: 'evergreen',
        planted: '2023-01',
        tended: '2025-12',
        blocks: [
            { number: "01", title: "Understand Before Building", text: "If you cannot explain it simply, you do not understand it well enough." },
            { number: "02", title: "Dependencies Are Liabilities", text: "Prefer 100 lines of your own code over a dependency you don't fully understand." },
            { number: "03", title: "Simplicity Is Requisite", text: "Complexity is the enemy of reliability." },
            { number: "04", title: "Build for the Long Term", text: "Code should last decades, not quarters." }
        ]
    },
    systems: {
        related: ['computation', 'building', 'minimal', 'runtimes', 'parallel', 'everything'],
        stage: 'evergreen',
        planted: '2017-01',
        tended: '2025-12',
        blocks: [
            { stat: "7+", label: "Years Shipping", text: "Software engineer from India. Building developer tools, ML inference systems, and automation that works." },
            {
                title: "Systems I Build",
                items: ["ML inference on Apple Silicon", "Rust CLI tools", "WebGL2/WebGPU rendering", "Telegram automation", "Information retrieval"]
            },
            {
                title: "Properties",
                items: ["Fast — Performance first", "Minimal — Less code, better results", "Reliable — Production tested", "Auditable — Open source"]
            }
        ]
    },
    that: {
        related: ['systems', 'learn'],
        stage: 'seed',
        planted: '2025-01',
        tended: '2025-01',
        blocks: [
            { title: "Subordinating Conjunction", text: "Introduces a subordinate clause expressing a statement. Connects the systems to their capabilities." }
        ]
    },
    learn: {
        related: ['adapt', 'reason', 'cognition', 'systems'],
        stage: 'evergreen',
        planted: '2017-01',
        tended: '2025-12',
        blocks: [
            {
                title: "Timeline",
                items: ["2024 — MLX-Swift & Apple Silicon", "2023 — Rust & Developer Tools", "2020 — Information Retrieval", "2017 — Telegram Bots"]
            },
            {
                title: "Languages",
                items: ["Rust — Systems & CLI", "Swift — Native & ML", "TypeScript — Web", "Python — Prototyping"]
            },
            {
                title: "Stack",
                items: ["Node.js / Bun", "React / Svelte / Vue", "PostgreSQL / Redis", "Docker / AWS / Cloudflare"]
            }
        ]
    },
    adapt: {
        related: ['learn', 'reason', 'cognition', 'building'],
        stage: 'evergreen',
        planted: '2017-01',
        tended: '2025-12',
        blocks: [
            { title: "Evolution", text: "2017: Telegram bots. 2020: Information retrieval. 2023: Rust & systems. 2024: MLX & Apple Silicon. Always adapting." },
            {
                title: "Services",
                items: ["Product Development — MVPs to production", "Architecture — APIs, databases, infra", "Performance — Optimization & caching", "Emergencies — Crisis response"]
            },
            { title: "Hire", text: "Available for contract work at $1,000/day. Book a 30min call to discuss your project." }
        ]
    },
    reason: {
        related: ['learn', 'adapt', 'cognition', 'computation', 'first'],
        stage: 'evergreen',
        planted: '2024-01',
        tended: '2025-12',
        blocks: [
            { title: "nano-reasoning", text: "High-performance port of FastRL to Apple Silicon using MLX-Swift. Reasoning models that run locally on consumer hardware." },
            {
                title: "Research",
                items: ["FastRL inference optimization", "On-device reasoning", "Speculative decoding for reasoning"]
            },
            { title: "Goal", text: "Systems that understand what they're doing, not just pattern match. Local, private, fast reasoning." }
        ]
    },
    not: {
        related: ['just', 'execute'],
        stage: 'seed',
        planted: '2025-01',
        tended: '2025-01',
        blocks: [
            { title: "Negation", text: "The most important word in logic. Systems that reason, not just execute." },
            {
                title: "What I Don't Do",
                items: ["Enterprise consulting", "Blockchain/Web3", "Mobile app development", "Legacy system maintenance"]
            }
        ]
    },
    just: {
        related: ['not', 'execute'],
        stage: 'seed',
        planted: '2025-01',
        tended: '2025-01',
        blocks: [
            { title: "Merely / Only", text: "Used to minimize or dismiss. 'Just execute' — the bare minimum. We aim higher than just execution." }
        ]
    },
    execute: {
        related: ['not', 'just', 'runtimes', 'computation'],
        stage: 'sprout',
        planted: '2024-03',
        tended: '2025-08',
        blocks: [
            { title: "Beyond Execution", text: "Current software merely executes. The goal is systems that understand what they are doing." },
            {
                title: "Execution Models",
                items: ["Von Neumann: Sequential", "Dataflow: Demand-driven", "Interaction nets: Parallel rewriting", "GPU: SIMD execution"]
            },
            { title: "Performance", text: "Execution speed matters, but correctness matters more. Fast wrong answers are useless." }
        ]
    },
    verifiable: {
        related: ['foundations', 'principles', 'auditable', 'source'],
        stage: 'evergreen',
        planted: '2023-06',
        tended: '2025-10',
        blocks: [
            { check: "\u2713", title: "Formal Verification", text: "Mathematical proofs of correctness. No testing can prove absence of bugs, but proofs can." },
            {
                title: "Techniques",
                items: ["Type systems as proofs", "Model checking", "SMT solvers", "Interactive theorem proving"]
            },
            {
                title: "Projects",
                items: ["verified-zig: Proven allocator", "safe-ir: Verified intermediate rep", "types-rs: Rust type checker proof"]
            }
        ]
    },
    foundations: {
        related: ['first', 'principles', 'verifiable', 'computation'],
        stage: 'evergreen',
        planted: '2023-01',
        tended: '2025-10',
        blocks: [
            {
                title: "Mathematical Base",
                items: ["Type theory: The language of structure", "Category theory: Abstract patterns", "Topology: Continuous reasoning", "Logic: Truth and consequence"]
            },
            {
                title: "Computing Base",
                items: ["Lambda calculus: Universal computation", "Combinatory logic: Variable-free", "Interaction nets: Parallel models", "Assembly: The metal"]
            },
            { title: "Philosophy", text: "Build from bedrock. Understand the ground beneath your feet." }
        ]
    },
    massively: {
        related: ['parallel', 'runtimes', 'computation', 'systems'],
        stage: 'sprout',
        planted: '2024-01',
        tended: '2025-06',
        blocks: [
            { number: "10\u2076", title: "Parallel Units", text: "Modern GPUs execute millions of threads simultaneously." },
            {
                title: "Scale Targets",
                items: ["GPU: 10,000+ cores", "CPU: 64+ threads", "Cluster: 1000+ nodes", "Edge: 100+ devices"]
            }
        ]
    },
    parallel: {
        related: ['massively', 'runtimes', 'computation'],
        stage: 'sprout',
        planted: '2024-01',
        tended: '2025-08',
        blocks: [
            { title: "MLX Parallelism", text: "Apple Silicon unified memory architecture allows efficient parallel computation." },
            { title: "paragon", text: "Provably correct, high-performance model training using Bend's massively parallel capabilities." },
            {
                title: "Hardware",
                items: ["Apple Neural Engine", "GPU compute shaders", "Multi-core CPU"]
            }
        ]
    },
    runtimes: {
        related: ['parallel', 'massively', 'computation', 'systems', 'execute'],
        stage: 'sprout',
        planted: '2023-06',
        tended: '2025-10',
        blocks: [
            { title: "Custom Runtimes", text: "Execution environments designed for specific computational models. Specialized for efficiency and correctness." },
            {
                title: "Implementations",
                items: ["inets: Interaction net runtime", "tensor-rt: GPU compute runtime", "wasm-kernel: Browser runtime", "predictive-rt: Inference engine"]
            },
            {
                title: "Design Goals",
                items: ["Minimal overhead", "Predictable performance", "No garbage collection", "Static memory"]
            }
        ]
    },
    everything: {
        related: ['minimal', 'systems', 'principles'],
        stage: 'sprout',
        planted: '2024-01',
        tended: '2025-06',
        blocks: [
            { title: "Universal Application", text: "These principles apply to all systems. No exceptions." },
            { title: "Scope", text: "Code, documentation, tests, processes. Everything is subject to the same standards." }
        ]
    },
    minimal: {
        related: ['everything', 'small', 'footprint', 'zero', 'dependencies', 'principles'],
        stage: 'evergreen',
        planted: '2020-01',
        tended: '2025-12',
        blocks: [
            { title: "Philosophy", text: "Every line of code is a liability. Fewer dependencies, simpler architectures, less to break." },
            {
                title: "Writing",
                items: ["The case for minimal software", "Shipping fast without breaking things"]
            },
            {
                title: "Principles",
                items: ["Every feature earns its place", "Question every dependency", "Remove before you add", "Complexity is a last resort"]
            }
        ]
    },
    small: {
        related: ['minimal', 'footprint', 'zero'],
        stage: 'sprout',
        planted: '2023-06',
        tended: '2025-06',
        blocks: [
            {
                title: "Size Metrics",
                items: ["Lines of code", "Binary size", "Memory footprint", "API surface", "Dependency count"]
            },
            { title: "Why Small Matters", text: "Small systems are comprehensible. They fit in a human mind." }
        ]
    },
    footprint: {
        related: ['small', 'minimal', 'zero'],
        stage: 'sprout',
        planted: '2023-06',
        tended: '2025-08',
        blocks: [
            { stat: "50KB", title: "Binary Size", text: "inets compiles to a 50KB static binary. No external dependencies." },
            {
                title: "Memory Footprint",
                items: ["No garbage collector", "Static allocation where possible", "Predictable memory usage", "No memory leaks"]
            },
            { title: "Environmental Impact", text: "Small software uses less energy. It runs on older hardware. It reduces e-waste." }
        ]
    },
    zero: {
        related: ['dependencies', 'minimal', 'small', 'footprint'],
        stage: 'evergreen',
        planted: '2020-01',
        tended: '2025-12',
        blocks: [
            { zero: true, title: "Zero Dependencies", text: "Each library you add is code you don't control. It can break, have security issues, bloat your bundle." },
            {
                title: "Projects",
                items: ["tanstack-bun — Zero overhead SSR", "orbit — Pure Rust TUI", "copilot — Single binary"]
            },
            { title: "Exceptions", text: "Where possible — practical constraints sometimes require compromise." }
        ]
    },
    dependencies: {
        related: ['zero', 'minimal', 'auditable', 'possible'],
        stage: 'evergreen',
        planted: '2020-01',
        tended: '2025-12',
        blocks: [
            {
                title: "The Dependency Problem",
                items: ["Supply chain attacks (log4j, xz)", "Left-pad incidents", "Version hell", "Audit impossibility"]
            },
            {
                title: "Solutions",
                items: ["Vendor critical code", "Reimplement trivial functions", "Use standard libraries", "Static linking"]
            },
            { title: "Policy", text: "Zero runtime dependencies. Every dependency requires justification." }
        ]
    },
    where: {
        related: ['possible'],
        stage: 'seed',
        planted: '2025-01',
        tended: '2025-01',
        blocks: [
            { title: "Adverb", text: "Indicates the condition under which something applies. Zero dependencies where possible acknowledges practical constraints." }
        ]
    },
    possible: {
        related: ['where', 'dependencies'],
        stage: 'seed',
        planted: '2025-01',
        tended: '2025-01',
        blocks: [
            { title: "Practical Constraints", text: "Ideals are aspirational. Sometimes external constraints require compromises." },
            {
                title: "Acceptable Exceptions",
                items: ["Hardware drivers", "Platform APIs", "Crypto libraries (audited)", "Build tools"]
            }
        ]
    },
    auditable: {
        related: ['source', 'verifiable', 'dependencies'],
        stage: 'evergreen',
        planted: '2020-06',
        tended: '2025-10',
        blocks: [
            { title: "Code You Can Read", text: "Every system I build can be understood by reading the source. I write Rust, Swift, TypeScript, and Python with clarity first." },
            {
                title: "Public Work",
                items: ["github.com/lulzx — 30+ public repos", "CLI tools in Rust", "MLX-Swift inference ports", "Web libraries"]
            },
            { title: "Open Source", text: "Most of my work is open source. 7+ years of shipping code you can inspect." }
        ]
    },
    from: {
        related: ['building', 'source', 'at'],
        stage: 'sprout',
        planted: '2024-01',
        tended: '2025-06',
        blocks: [
            { title: "Origin", text: "Software engineer from India. Building developer tools, ML inference systems, and automation that works." },
            { title: "Location", text: "Based in India, working remotely with teams worldwide. Available for contract work at $1,000/day." },
            {
                title: "History",
                items: ["2017: Started with Telegram bots", "2020: Information retrieval systems", "2023: Rust & developer tools", "2024: MLX-Swift & Apple Silicon"]
            }
        ]
    },
    source: {
        related: ['auditable', 'from', 'building'],
        stage: 'evergreen',
        planted: '2017-01',
        tended: '2025-12',
        blocks: [
            { title: "GitHub", text: "github.com/lulzx — 30+ public repositories. 9 languages. Open source work you can audit, modify, and learn from." },
            {
                title: "Featured Repos",
                items: ["copilot — Rust CLI AI assistant", "orbit — Spatial TUI dashboard", "speculative-decoding — MLX-Swift", "tanstack-bun — SSR framework"]
            },
            { title: "License", text: "Most projects are MIT licensed. Free to use, modify, and distribute." }
        ]
    }
};

// Notes data store
const notesData = {
    'minimal-software': {
        title: 'Less code',
        stage: 'evergreen',
        planted: '2024-10',
        tended: '2026-01',
        words: ['minimal', 'dependencies', 'small', 'footprint', 'zero', 'principles'],
        relatedNotes: ['the-100-line-rule', 'one-file'],
        content: `<p>I keep coming back to this: the best code is the code I didn't write.</p>
<p>Not in a lazy way. In a <em>if this line doesn't need to exist, it shouldn't</em> way.</p>
<p>Every line I add is a line I have to maintain. A line that can break. A line someone else has to read and understand. Including future me, who will have forgotten why it's there.</p>
<h2>What I actually do</h2>
<p>Before I add a feature, I try to remove one. Before I add a file, I check if an existing one can hold it. Before I add a dependency, I look at how many lines it would take to write myself.</p>
<p>Usually fewer than I think.</p>
<p>My site is one HTML file. My CLI tools compile to single binaries. My libraries have zero runtime dependencies. Not because I'm trying to prove something. Because every time I've done it the other way, I've regretted it.</p>
<h2>The hard part</h2>
<p>Removing is harder than adding. Always. Your brain wants to solve problems by creating things. It takes real discipline to solve them by destroying things instead.</p>
<p>But the projects I'm most proud of are the ones where I looked at the code and thought "there's nothing left to take away."</p>`
    },
    'shipping-fast': {
        title: 'Ship small, ship often',
        stage: 'evergreen',
        planted: '2025-12',
        tended: '2026-01',
        words: ['systems', 'building', 'adapt', 'execute', 'minimal'],
        relatedNotes: ['worse-is-better', 'minimal-software'],
        content: `<p>The fastest teams I've worked with shipped the smallest changes.</p>
<p>Not because small is easy. Because small is <em>safe</em>. A 30-line diff is easy to review, easy to test, easy to revert if it breaks. A 3000-line diff is a prayer.</p>
<p>I used to batch things up. "I'll ship all of this together when it's ready." It was never ready. And when I finally pushed, something always broke, and I couldn't tell which part did it.</p>
<p>Now I ship constantly. Multiple times a day sometimes. Each change does one thing. If it breaks, I know exactly what and exactly why.</p>
<h2>The counterintuitive part</h2>
<p>Going faster means doing less per step. Not more. The urge is always to do more\u2014add the error handling, refactor that other thing while you're in there, fix that bug you noticed. Don't.</p>
<p>One thing. Ship it. Next thing.</p>
<p>Deploy should be boring. If it's exciting, you're doing it wrong.</p>`
    },
    'telegram-bots': {
        title: 'Seven years of Telegram bots',
        stage: 'evergreen',
        planted: '2024-06',
        tended: '2026-01',
        words: ['systems', 'building', 'adapt', 'learn', 'runtimes'],
        relatedNotes: ['learn-by-building', 'shipping-fast'],
        content: `<p>I started building Telegram bots in 2017 because I was bored. Wrote one that replied to messages with random quotes. Took maybe an hour.</p>
<p>That was the gateway drug.</p>
<p>Seven years later, some of my bots handle millions of messages a day. I've learned more about building reliable systems from bots than from any job or course.</p>
<h2>The one thing that matters</h2>
<p>Webhooks, not polling. That's it. That's the entire scaling secret. Polling is you calling Telegram every second asking "anything new?" Webhooks are Telegram calling <em>you</em> when something happens.</p>
<p>After that, it's the same stuff that makes any system work: queue your messages, process them async, cache aggressively, and log everything.</p>
<h2>What bots taught me</h2>
<p>Bots fail constantly. The API times out. Users send garbage. Your server runs out of memory at 3am. You learn to build for failure because you have no choice.</p>
<p>A bot that crashes and recovers gracefully is infinitely better than one that never crashes but silently drops messages. I apply this to everything I build now.</p>
<p>Most of what I know about distributed systems, I learned from a chat bot.</p>`
    },
    'semver-30x-faster': {
        title: 'semver, but 30x faster',
        stage: 'evergreen',
        planted: '2025-12',
        tended: '2026-01',
        words: ['computation', 'minimal', 'zero', 'dependencies', 'small', 'footprint', 'execute'],
        relatedNotes: ['minimal-software', 'the-100-line-rule'],
        content: `<p>Every <code>npm install</code> parses version strings. Thousands of them. Installing preact alone calls <code>semver</code> 21,000 times. One package.</p>
<p>The <code>semver</code> package has 150 million weekly downloads. And it's doing way more work than it needs to.</p>
<h2>The dumb idea</h2>
<p>Version numbers aren't random. React is at 18. Node is at 22. Most packages never pass major version 50. So I precomputed all of them.</p>
<pre><code>const cache = Object.create(null);
for (let M = 0; M &lt; 50; M++)
  for (let m = 0; m &lt; 50; m++)
    for (let p = 0; p &lt; 20; p++)
      cache[M+'.'+m+'.'+p] = {major:M, minor:m, patch:p};</code></pre>
<p>50,000 objects. Allocated once. Now parsing <code>1.0.0</code> is just a hash lookup. No regex. No nothing.</p>
<h2>Then compile the ranges</h2>
<p><code>^1.2.3</code> always means the same thing. So compile it once to a closure:</p>
<pre><code>(M, m, p, pr) =&gt; !pr && M === 1 && ((m-2)||(p-3)) >= 0</code></pre>
<p>Next time you check any version against <code>^1.2.3</code>, it's four integers and some arithmetic. Done.</p>
<h2>Result</h2>
<p><strong>208 million</strong> parses per second. 35x faster. 6.4 kB gzipped. Zero dependencies.</p>
<p>Half my ideas didn't work. Hash arrays were slower than V8's internals. Fast-path parsing added overhead because the cache was already fast enough. Benchmark everything. Your gut is wrong.</p>
<p><a href="https://github.com/Lulzx/pico-semver">github.com/Lulzx/pico-semver</a></p>`
    },
    'the-100-line-rule': {
        title: 'The 100-line rule',
        stage: 'evergreen',
        planted: '2023-06',
        tended: '2026-01',
        words: ['dependencies', 'zero', 'minimal', 'small', 'principles'],
        relatedNotes: ['minimal-software', 'do-it-yourself'],
        content: `<p>If a dependency is less than 100 lines of code, I write it myself.</p>
<p>Not because I think I'm smarter than the library author. Because I think 100 lines I understand completely is better than 100 lines I don't.</p>
<p>Left-pad was 11 lines. It broke the internet. I could have written it in 30 seconds. So could you. So could anyone. But 2.5 million projects depended on one person not deleting their npm package.</p>
<p>I have a utils file in most of my projects. It has debounce, throttle, deep clone, a couple of string helpers. Maybe 80 lines total. I've never had a supply chain attack on my utils file.</p>
<p>The threshold isn't really 100 lines. It's: <em>can I understand every line of this?</em> If yes, I own it. If no, I think very hard about whether I need it.</p>`
    },
    'do-it-yourself': {
        title: 'npm install regret',
        stage: 'evergreen',
        planted: '2023-03',
        tended: '2025-10',
        words: ['dependencies', 'zero', 'minimal', 'building', 'source'],
        relatedNotes: ['the-100-line-rule', 'minimal-software'],
        content: `<p>I used to <code>npm install</code> everything. Need to pad a string? Package. Parse a date? Package. Check if a number is even? Believe it or not, package.</p>
<p>Then I'd open <code>node_modules</code> and find 800 folders for a project that sends emails.</p>
<p>The turning point was a security audit. I had to explain every dependency. Why do we need this? What does it do? Can we trust the maintainer? I couldn't answer for half of them. I'd installed packages I'd never read a single line of.</p>
<p>Now I default to writing it myself. Most things I need are 20-50 lines. The ones that aren't\u2014crypto, compression, database drivers\u2014I add thoughtfully and pin the version.</p>
<p>My <code>node_modules</code> went from 800 folders to about 30. My builds are faster. My deploys are smaller. And I actually know what my code does.</p>`
    },
    'rust-changed-my-brain': {
        title: 'Rust rewired my brain',
        stage: 'evergreen',
        planted: '2023-01',
        tended: '2025-12',
        words: ['computation', 'systems', 'learn', 'foundations'],
        relatedNotes: ['learn-by-building', 'speed-is-a-feature'],
        content: `<p>I picked up Rust in 2023 expecting a language. I got a way of thinking.</p>
<p>The borrow checker isn't a restriction. It's a question: <em>who owns this data?</em> I'd never asked that before. In Python and JavaScript, the answer was "who cares, the garbage collector will figure it out." In Rust, you have to know.</p>
<p>Now I think about ownership in every language. When I write TypeScript, I notice when I'm passing references carelessly. When I design an API, I think about who's responsible for cleanup. Rust didn't teach me Rust. It taught me to think about data.</p>
<p>The other thing: Rust made me comfortable with the compiler saying no. In dynamic languages, you discover mistakes at runtime. In Rust, the compiler catches them. At first this felt slow. Now every other language feels reckless.</p>
<p>I still write TypeScript and Python when they're the right tool. But I write them differently than I used to.</p>`
    },
    'read-the-source': {
        title: 'Read the source',
        stage: 'evergreen',
        planted: '2020-06',
        tended: '2025-08',
        words: ['source', 'auditable', 'learn', 'foundations'],
        relatedNotes: ['rust-changed-my-brain', 'learn-by-building'],
        content: `<p>The best programmers I know spend more time reading code than writing it.</p>
<p>I used to think building things was how you got good. It's part of it. But the other part is reading how other people solved the same problem. Not blog posts <em>about</em> the code. The actual code.</p>
<p>I learned more from reading the Redis source than from any database course. It's 50,000 lines of beautifully clear C. Every function does what its name says. The comments explain <em>why</em>, not <em>what</em>.</p>
<p>When I'm stuck on a design decision, I look at how someone I respect solved it. Not Stack Overflow. Not a tutorial. The source. It's always there. Most things worth learning from are open source.</p>
<p>Reading code is a skill nobody teaches and everyone needs.</p>`
    },
    'speed-is-a-feature': {
        title: 'Speed is respect',
        stage: 'evergreen',
        planted: '2024-03',
        tended: '2025-12',
        words: ['computation', 'execute', 'minimal', 'systems', 'footprint'],
        relatedNotes: ['semver-30x-faster', 'minimal-software'],
        content: `<p>Every millisecond you waste is a millisecond of someone's life.</p>
<p>That sounds dramatic. But multiply it. A page that takes 2 seconds instead of 200ms, loaded 10,000 times a day. That's 5 hours of human life wasted. Every day. On one page.</p>
<p>Performance isn't a technical concern. It's a moral one. When your software is slow, you're saying: my time was more valuable than yours. I couldn't be bothered to optimize this.</p>
<p>I don't mean premature optimization. I mean: choose the right data structure. Don't load what you don't need. Don't make the user wait for something you could have precomputed.</p>
<p>The fastest software I use is the software I forget is there. It just does the thing instantly and gets out of the way. That's what respect looks like in code.</p>`
    },
    'apple-silicon': {
        title: 'The M1 broke my assumptions',
        stage: 'sprout',
        planted: '2024-01',
        tended: '2025-10',
        words: ['computation', 'parallel', 'runtimes', 'systems'],
        relatedNotes: ['rust-changed-my-brain', 'speed-is-a-feature'],
        content: `<p>In 2024 I started porting ML models to Apple Silicon using MLX-Swift. I expected it to be a compromise. Run models locally, sure, but slowly.</p>
<p>It wasn't slow.</p>
<p>Unified memory changes everything. The GPU and CPU share the same RAM. No copying tensors back and forth. You just... use it. A 14-inch laptop running inference faster than my old cloud GPU setup.</p>
<p>I ported speculative decoding. Then a reasoning model. Then an OCR pipeline. Each time I expected to hit a wall. Each time the wall wasn't there.</p>
<p>The assumption I had to break: "real ML needs a data center." No. Real ML needs good hardware and good software. A MacBook has both now.</p>
<p>The models run locally. No API calls. No latency. No sending private data to someone else's server. I think this is the future and most people haven't realized it yet.</p>`
    },
    'learn-by-building': {
        title: 'Learn by building',
        stage: 'evergreen',
        planted: '2017-06',
        tended: '2025-12',
        words: ['learn', 'building', 'adapt', 'systems'],
        relatedNotes: ['seven-years', 'telegram-bots'],
        content: `<p>I never finished a programming course. I've started dozens. Never finished one.</p>
<p>What I did instead: I built things. A bot that tells you the weather. A search engine for my bookmarks. A CLI tool that does one thing I needed.</p>
<p>Each one taught me exactly what I needed to know, exactly when I needed to know it. Not "here's how arrays work" in week 3 of a curriculum. But "I need to sort these results by relevance\u2014how do I do that?" at 1am on a Tuesday because I'm obsessed with my side project.</p>
<p>Courses teach you syntax. Projects teach you engineering. The difference is that projects have real constraints: this needs to actually work, for real users, on a real computer.</p>
<p>Build something small. Make it work. Make it better. That's the whole curriculum.</p>`
    },
    'one-file': {
        title: 'One file is enough',
        stage: 'sprout',
        planted: '2025-06',
        tended: '2026-02',
        words: ['minimal', 'small', 'building', 'everything', 'source'],
        relatedNotes: ['minimal-software', 'the-100-line-rule'],
        content: `<p>This website is one HTML file. The CSS, the JavaScript, the data, the components, the router\u2014all in one file.</p>
<p>People ask why. The answer: why not?</p>
<p>One file means no build step. No bundler config. No module resolution. No "it works on my machine." Open the file, it works. Deploy the file, it's live.</p>
<p>There's a weird pressure in web development to have a "proper" project structure. Fourteen config files before you write a line of code. A build pipeline that takes longer than the actual program.</p>
<p>For a lot of projects\u2014especially personal ones\u2014none of that is necessary. You're not building Gmail. You're building a page that shows some text and links. One file handles that just fine.</p>
<p>I'll add complexity when I need it. So far I haven't needed it.</p>`
    },
    'worse-is-better': {
        title: 'Ship it ugly',
        stage: 'evergreen',
        planted: '2024-08',
        tended: '2025-10',
        words: ['building', 'adapt', 'execute', 'principles'],
        relatedNotes: ['shipping-fast', 'learn-by-building'],
        content: `<p>The first version of everything I've shipped was embarrassing.</p>
<p>My first Telegram bot was 200 lines of spaghetti Python with hardcoded strings. It worked. People used it. I cleaned it up later.</p>
<p>My first Rust CLI was a single main.rs with no error handling. It worked. I used it daily. I refactored it later.</p>
<p>This website was a plain HTML page with no CSS for a week. It worked. You're reading the better version. But the ugly version came first.</p>
<p>I've watched people spend months "getting it right" before showing anyone. They burn out or lose interest. The project dies in a private repo, perfect and unseen.</p>
<p>Ship the ugly version. See if anyone cares. If they do, make it less ugly. If they don't, you just saved yourself months of polishing something nobody wanted.</p>`
    },
    'remote-from-india': {
        title: 'The timezone advantage',
        stage: 'sprout',
        planted: '2024-04',
        tended: '2025-06',
        words: ['building', 'adapt', 'from', 'systems'],
        relatedNotes: ['seven-years', 'shipping-fast'],
        content: `<p>I'm in India. Most of my clients are in the US or Europe. People think this is a disadvantage. It's not.</p>
<p>When my American clients go to sleep, I start working. When they wake up, the thing they asked for is done. It feels like magic to them. It's just timezones.</p>
<p>The async part is key. I don't do meetings if I can avoid it. Write it down. Put it in a ticket. I'll read it and respond with code.</p>
<p>Meetings across timezones are miserable for everyone. But a well-written message works in every timezone. I've had entire client relationships where we never had a single call. Just messages and pull requests. The work spoke for itself.</p>
<p>Remote work isn't about being in the same room at the same time. It's about being reliable and clear. That works from anywhere.</p>`
    },
    'seven-years': {
        title: 'Seven years of shipping code',
        stage: 'evergreen',
        planted: '2024-01',
        tended: '2026-01',
        words: ['building', 'learn', 'adapt', 'systems', 'source'],
        relatedNotes: ['learn-by-building', 'rust-changed-my-brain'],
        content: `<p>2017: Telegram bots in Python. Everything in one file. Deployed by SSH-ing into a $5 server and running <code>python bot.py</code>.</p>
<p>2018: Discovered Node.js. Rewrote everything. Thought callbacks were fine. They weren't.</p>
<p>2019: Built an image search engine. Learned about vectors, embeddings, and why databases are hard.</p>
<p>2020: Information retrieval systems. HNSW, semantic search, the stuff that turned into "AI" a few years later.</p>
<p>2021: Burned out. Built nothing for three months. Came back and everything was better.</p>
<p>2023: Found Rust. Rewrote my CLI tools. Realized I'd been thinking about software wrong for years.</p>
<p>2024: Apple Silicon, MLX-Swift, running models locally that used to need a data center.</p>
<p>The through-line isn't a plan. I didn't have a five-year roadmap. I just kept building whatever interested me, and the interests kept changing. The only constant: I always shipped something.</p>
<p>Seven years of following curiosity. That's the whole career strategy.</p>`
    },
    'naming': {
        title: 'Names are interfaces',
        stage: 'seed',
        planted: '2025-03',
        tended: '2025-08',
        words: ['building', 'source', 'foundations', 'principles'],
        relatedNotes: ['read-the-source', 'one-file'],
        content: `<p>I spend more time naming things than writing the code inside them.</p>
<p>A function called <code>processData</code> tells me nothing. A function called <code>parseVersionString</code> tells me everything. The second one doesn't need a comment. The first one needs a paragraph.</p>
<p>Good names are compression. They pack meaning into a few characters. Bad names are debt. Every time someone reads <code>handleStuff</code>, they have to open the function and read the body to know what it does.</p>
<p>I rename things constantly. It's free. It doesn't change behavior. But it changes comprehension. And comprehension is everything when you're debugging at midnight and your brain is half off.</p>
<p>If I can't name something clearly, it usually means I don't understand it well enough yet. The naming struggle is a design signal.</p>`
    },
    'debugging': {
        title: 'Debug by reading',
        stage: 'seed',
        planted: '2025-06',
        tended: '2025-11',
        words: ['learn', 'source', 'execute', 'foundations'],
        relatedNotes: ['read-the-source', 'rust-changed-my-brain'],
        content: `<p>When something breaks, I don't reach for the debugger. I read the code.</p>
<p>Not skim. Read. Start from the entry point. Follow the data. Ask: what did I <em>think</em> this does? What does it <em>actually</em> do? The bug is in the gap between those two questions.</p>
<p>Debuggers are great for watching state. But they don't help you understand <em>why</em> the state is wrong. For that, you need to think. And thinking requires reading.</p>
<p>My debugging process: read, form a hypothesis, add one log to confirm or deny, repeat. Three rounds of this solves most bugs. The ones it doesn't are the interesting ones.</p>
<p>The best debugging tool is a good understanding of your own code. If you have that, you barely need anything else.</p>`
    },
    'tools-shape-thinking': {
        title: 'Your tools are your thoughts',
        stage: 'seed',
        planted: '2025-08',
        tended: '2025-12',
        words: ['computation', 'learn', 'foundations', 'systems'],
        relatedNotes: ['rust-changed-my-brain', 'learn-by-building'],
        content: `<p>I write different code in Rust than in Python. Not just syntactically. Structurally. The language shapes how I think about the problem.</p>
<p>In Python I prototype fast and sloppy. In Rust I design upfront because the compiler won't let me be sloppy. In TypeScript I lean on types to document intent. Each language is a different lens on the same problem.</p>
<p>Same with editors. Same with operating systems. Same with keyboards. Everything you use daily shapes how you think without you noticing.</p>
<p>I switched to a tiling window manager and started breaking problems into smaller, independent pieces. Coincidence? Maybe. But probably not.</p>
<p>Choose your tools deliberately. You become what you use.</p>`
    },
    'side-projects': {
        title: 'Side projects are the real work',
        stage: 'sprout',
        planted: '2024-06',
        tended: '2025-10',
        words: ['building', 'learn', 'source', 'adapt'],
        relatedNotes: ['learn-by-building', 'seven-years'],
        content: `<p>Everything good in my career came from a side project.</p>
<p>My first job came from a Telegram bot I built for fun. My freelance clients found me through open source repos. My best technical skills came from projects nobody asked me to build.</p>
<p>Side projects have one advantage over work projects: you choose the constraints. Want to learn Rust? Build something in Rust. Want to understand ML inference? Port a model. Nobody's telling you to use the company's approved stack.</p>
<p>I don't build side projects to "build a portfolio." I build them because I'm curious about something and the only way to understand it is to build it.</p>
<p>The portfolio is a side effect. The curiosity is the point.</p>`
    },
    'rewrite-it': {
        title: 'The second version',
        stage: 'sprout',
        planted: '2024-11',
        tended: '2025-12',
        words: ['building', 'learn', 'adapt', 'systems', 'minimal'],
        relatedNotes: ['worse-is-better', 'seven-years'],
        content: `<p>I rewrite things a lot. Not because the first version is bad. Because I understand the problem now.</p>
<p>The first time you build something, you're learning the domain. You make wrong abstractions. You over-engineer some parts and under-engineer others. You can't know the right design until you've built the wrong one.</p>
<p>The rewrite isn't starting over. It's starting informed.</p>
<p>I rewrote my search engine three times. Version one: Python, slow, wrong data structures. Version two: Node.js, faster, better architecture, still wrong in subtle ways. Version three: Rust, correct, fast, half the code of version one.</p>
<p>People say "don't rewrite." I think they mean "don't rewrite for fun." But rewriting because you now understand the problem deeply? That produces the best software I've ever written.</p>`
    }
};

// Get notes that reference a word
function getNotesForWord(word) {
    const results = [];
    for (const [id, note] of Object.entries(notesData)) {
        if (note.words.includes(word)) {
            results.push({ id, ...note });
        }
    }
    return results;
}

// Home component
const Home = {
    template: `
        <div class="container">
            <div class="main">
                <p class="statement">
                    <router-link to="/words/building" class="word">Building</router-link>&nbsp;
                    <router-link to="/words/at" class="word">at</router-link>&nbsp;
                    <router-link to="/words/the" class="word">the</router-link>&nbsp;
                    <router-link to="/words/intersection" class="word">intersection</router-link>&nbsp;
                    <router-link to="/words/of" class="word">of</router-link>&nbsp;
                    <router-link to="/words/computation" class="word">computation</router-link><span class="punctuation">, </span>
                    <router-link to="/words/cognition" class="word">cognition</router-link><span class="punctuation">, </span>
                    <router-link to="/words/and" class="word">and</router-link>&nbsp;
                    <router-link to="/words/first" class="word">first</router-link>&nbsp;
                    <router-link to="/words/principles" class="word">principles</router-link><span class="punctuation">. </span>
                    <router-link to="/words/systems" class="word">Systems</router-link>&nbsp;
                    <router-link to="/words/that" class="word">that</router-link>&nbsp;
                    <router-link to="/words/learn" class="word">learn</router-link><span class="punctuation">, </span>
                    <router-link to="/words/adapt" class="word">adapt</router-link><span class="punctuation">, </span>
                    <router-link to="/words/and" class="word">and</router-link>&nbsp;
                    <router-link to="/words/reason" class="word">reason</router-link>&nbsp;
                    <router-link to="/words/not" class="word">not</router-link>&nbsp;
                    <router-link to="/words/just" class="word">just</router-link>&nbsp;
                    <router-link to="/words/execute" class="word">execute</router-link><span class="punctuation">. </span>
                    <router-link to="/words/verifiable" class="word">Verifiable</router-link>&nbsp;
                    <router-link to="/words/foundations" class="word">foundations</router-link><span class="punctuation">. </span>
                    <router-link to="/words/massively" class="word">Massively</router-link>&nbsp;
                    <router-link to="/words/parallel" class="word">parallel</router-link>&nbsp;
                    <router-link to="/words/runtimes" class="word">runtimes</router-link><span class="punctuation">. </span>
                    <router-link to="/words/everything" class="word">Everything</router-link>&nbsp;
                    <router-link to="/words/minimal" class="word">minimal</router-link><span class="punctuation">: </span>
                    <router-link to="/words/small" class="word">small</router-link>&nbsp;
                    <router-link to="/words/footprint" class="word">footprint</router-link><span class="punctuation">, </span>
                    <router-link to="/words/zero" class="word">zero</router-link>&nbsp;
                    <router-link to="/words/dependencies" class="word">dependencies</router-link>&nbsp;
                    <router-link to="/words/where" class="word">where</router-link>&nbsp;
                    <router-link to="/words/possible" class="word">possible</router-link><span class="punctuation">, </span>
                    <router-link to="/words/auditable" class="word">auditable</router-link>&nbsp;
                    <router-link to="/words/from" class="word">from</router-link>&nbsp;
                    <router-link to="/words/source" class="word">source</router-link><span class="punctuation">.</span>
                </p>
            </div>
            <div class="footer">
                <span>lulzx</span>
                <div class="footer-links">
                    <a href="https://github.com/lulzx">github</a>
                    <a href="mailto:hello@lulzx.dev">email</a>
                    <router-link to="/garden">garden map</router-link>
                    <a href="#" @click.prevent="wander">wander</a>
                </div>
            </div>
        </div>
    `,
    methods: {
        wander() {
            const words = ALL_WORDS();
            const word = words[Math.floor(Math.random() * words.length)];
            this.$router.push('/words/' + word);
        }
    }
};

// Word page component
const WordPage = {
    template: `
        <div class="word-page">
            <div class="word-header">
                <div class="word-header-left">
                    <router-link to="/" class="back">\u2190 back</router-link>
                    <div class="breadcrumbs" v-if="trail.length > 0">
                        <span class="sep">/</span>
                        <template v-for="(crumb, i) in trail" :key="crumb">
                            <router-link :to="'/words/' + crumb">{{ crumb }}</router-link>
                            <span class="sep" v-if="i < trail.length - 1">/</span>
                        </template>
                    </div>
                </div>
                <span style="font-size: 0.875rem;">lulzx</span>
            </div>
            <div class="word-title-section">
                <div class="word-title">{{ wordId }}</div>
                <span v-if="data" class="stage-badge" :class="'stage-' + data.stage">{{ data.stage }}</span>
            </div>
            <div class="word-meta" v-if="data && data.planted">
                <span>planted {{ timeAgo(data.planted) }}</span>
                <span>tended {{ timeAgo(data.tended) }}</span>
            </div>
            <div class="word-content" :key="wordId">
                <div v-for="(block, index) in blocks" :key="index"
                     class="block"
                     :class="{ 'block-inverted': block.stat || block.check, 'block-zero': block.zero }"
                     :style="{ animationDelay: (index * 0.05) + 's' }">
                    <div v-if="block.stat" class="stat">{{ block.stat }}</div>
                    <div v-if="block.zero" class="zero">0</div>
                    <div v-if="block.check" style="font-size: 4rem; margin-bottom: 1rem;">{{ block.check }}</div>
                    <h2 v-if="block.label">{{ block.label }}</h2>
                    <h2 v-else>{{ block.title }}</h2>
                    <p v-if="block.text" v-html="linkifyText(block.text)"></p>
                    <ul v-if="block.items">
                        <li v-for="item in block.items" :key="item" v-html="linkifyText(item)"></li>
                    </ul>
                </div>
            </div>
            <div class="connections-section" v-if="related.length > 0">
                <div class="section-title">Connections</div>
                <div class="chips">
                    <router-link v-for="r in related" :key="r" :to="'/words/' + r" class="chip">{{ r }}</router-link>
                </div>
            </div>
            <div class="notes-section" v-if="notes.length > 0">
                <div class="section-title">Notes</div>
                <router-link v-for="note in notes" :key="note.id" :to="'/notes/' + note.id" class="note-link">
                    <span class="note-link-title">{{ note.title }}</span>
                    <span class="note-link-stage">{{ note.stage }}</span>
                </router-link>
            </div>
            <div class="wander-section">
                <button class="wander-btn" @click="wander">\u2192 wander to a random word</button>
            </div>
        </div>
    `,
    computed: {
        wordId() {
            return this.$route.params.word;
        },
        data() {
            return wordData[this.wordId];
        },
        blocks() {
            return this.data?.blocks || [{ title: "Not Found", text: "This word has no content yet." }];
        },
        related() {
            return this.data?.related || [];
        },
        notes() {
            return getNotesForWord(this.wordId);
        },
        trail() {
            const t = getTrail().filter(w => w !== this.wordId);
            return t.slice(-3);
        }
    },
    methods: {
        timeAgo,
        linkifyText(text) {
            if (!text) return '';
            const wordKeys = ALL_WORDS().filter(w => !SKIP_WORDS.has(w));
            // Sort by length descending so longer words match first
            wordKeys.sort((a, b) => b.length - a.length);
            // Build regex that matches whole words only
            const pattern = new RegExp('\\b(' + wordKeys.map(w => w.replace(/[.*+?^${}()|[\]\\]/g, '\\$&')).join('|') + ')\\b', 'gi');
            return text.replace(pattern, (match) => {
                const lower = match.toLowerCase();
                if (lower === this.wordId) return match; // Don't link to self
                if (wordData[lower]) {
                    return '<a href="/words/' + lower + '" class="inline-word-link" onclick="event.preventDefault(); window.__gardenRouter.push(\'/words/' + lower + '\')">' + match + '</a>';
                }
                return match;
            });
        },
        wander() {
            const words = ALL_WORDS().filter(w => w !== this.wordId);
            const word = words[Math.floor(Math.random() * words.length)];
            this.$router.push('/words/' + word);
        }
    },
    watch: {
        wordId: {
            handler(val) {
                if (val && wordData[val]) {
                    addToTrail(val);
                }
            },
            immediate: true
        }
    }
};

// Note page component
const NotePage = {
    template: `
        <div class="note-page" v-if="note">
            <div class="word-header">
                <router-link to="/" class="back">\u2190 back</router-link>
                <span style="font-size: 0.875rem;">lulzx</span>
            </div>
            <div class="note-header">
                <div class="note-title">{{ note.title }}</div>
                <div class="note-meta">
                    <span class="stage-badge" :class="'stage-' + note.stage">{{ note.stage }}</span>
                    <span>planted {{ timeAgo(note.planted) }}</span>
                    <span>tended {{ timeAgo(note.tended) }}</span>
                </div>
            </div>
            <div class="note-body" v-html="note.content"></div>
            <div class="note-connections" v-if="note.words && note.words.length">
                <div class="section-title">Connected Words</div>
                <div class="chips">
                    <router-link v-for="w in note.words" :key="w" :to="'/words/' + w" class="chip">{{ w }}</router-link>
                </div>
            </div>
            <div class="note-related" v-if="note.relatedNotes && note.relatedNotes.length">
                <div class="section-title">Related Notes</div>
                <router-link v-for="rn in note.relatedNotes" :key="rn" :to="'/notes/' + rn" class="note-link">
                    <span class="note-link-title">{{ getNoteTitle(rn) }}</span>
                </router-link>
            </div>
            <div class="wander-section">
                <button class="wander-btn" @click="wander">\u2192 wander to a random word</button>
            </div>
        </div>
        <div class="word-page" v-else>
            <div class="word-header">
                <router-link to="/" class="back">\u2190 back</router-link>
                <span style="font-size: 0.875rem;">lulzx</span>
            </div>
            <div class="word-title-section">
                <div class="word-title">404</div>
            </div>
            <div class="word-content">
                <div class="block"><h2>Not Found</h2><p>This note doesn't exist. <router-link to="/garden" style="color:#000;text-decoration:underline;">Browse the garden</router-link>.</p></div>
            </div>
        </div>
    `,
    computed: {
        noteId() {
            return this.$route.params.noteId;
        },
        note() {
            return notesData[this.noteId];
        }
    },
    methods: {
        timeAgo,
        getNoteTitle(id) {
            return notesData[id]?.title || id;
        },
        wander() {
            const words = ALL_WORDS();
            const word = words[Math.floor(Math.random() * words.length)];
            this.$router.push('/words/' + word);
        }
    }
};

// Garden map component
const GardenMap = {
    template: `
        <div class="garden-page">
            <div class="word-header">
                <router-link to="/" class="back">\u2190 back</router-link>
                <span style="font-size: 0.875rem;">lulzx</span>
            </div>
            <div class="garden-header">
                <div class="garden-title">Garden Map</div>
                <div class="garden-subtitle">{{ totalWords }} words, {{ totalNotes }} notes. An interconnected web of ideas at various stages of growth.</div>
            </div>
            <div class="garden-filters">
                <button class="filter-btn" :class="{ active: filter === 'all' }" @click="filter = 'all'">All</button>
                <button class="filter-btn" :class="{ active: filter === 'evergreen' }" @click="filter = 'evergreen'">Evergreen</button>
                <button class="filter-btn" :class="{ active: filter === 'sprout' }" @click="filter = 'sprout'">Sprout</button>
                <button class="filter-btn" :class="{ active: filter === 'seed' }" @click="filter = 'seed'">Seed</button>
            </div>
            <div class="garden-section">
                <div class="garden-section-title">Words ({{ filteredWords.length }})</div>
                <div class="garden-grid">
                    <router-link v-for="(w, i) in filteredWords" :key="w.id" :to="'/words/' + w.id" class="garden-card" :style="{ animationDelay: (i * 0.02) + 's' }">
                        <div class="garden-card-name">{{ w.id }}</div>
                        <div class="garden-card-meta">
                            <span><span class="stage-dot" :class="'stage-dot-' + w.stage"></span> {{ w.stage }}</span>
                            <span>{{ w.connections }} links</span>
                        </div>
                    </router-link>
                </div>
            </div>
            <div class="garden-section">
                <div class="garden-section-title">Notes ({{ filteredNotes.length }})</div>
                <div class="garden-notes-grid">
                    <router-link v-for="n in filteredNotes" :key="n.id" :to="'/notes/' + n.id" class="garden-note-card">
                        <div class="garden-note-title">{{ n.title }}</div>
                        <div class="garden-note-meta">
                            <span><span class="stage-dot" :class="'stage-dot-' + n.stage"></span> {{ n.stage }}</span>
                            <span>{{ n.wordCount }} words</span>
                        </div>
                    </router-link>
                </div>
            </div>
            <div class="wander-section">
                <button class="wander-btn" @click="wander">\u2192 wander to a random word</button>
            </div>
        </div>
    `,
    data() {
        return { filter: 'all' };
    },
    computed: {
        totalWords() { return Object.keys(wordData).length; },
        totalNotes() { return Object.keys(notesData).length; },
        allWords() {
            return Object.entries(wordData).map(([id, d]) => ({
                id,
                stage: d.stage,
                connections: (d.related || []).length
            })).sort((a, b) => {
                const order = { evergreen: 0, sprout: 1, seed: 2 };
                return (order[a.stage] - order[b.stage]) || a.id.localeCompare(b.id);
            });
        },
        filteredWords() {
            if (this.filter === 'all') return this.allWords;
            return this.allWords.filter(w => w.stage === this.filter);
        },
        allNotes() {
            return Object.entries(notesData).map(([id, n]) => ({
                id,
                title: n.title,
                stage: n.stage,
                wordCount: n.content.replace(/<[^>]*>/g, '').split(/\s+/).length
            }));
        },
        filteredNotes() {
            if (this.filter === 'all') return this.allNotes;
            return this.allNotes.filter(n => n.stage === this.filter);
        }
    },
    methods: {
        wander() {
            const words = ALL_WORDS();
            const word = words[Math.floor(Math.random() * words.length)];
            this.$router.push('/words/' + word);
        }
    }
};

// 404 component
const NotFound = {
    template: `
        <div class="container">
            <div class="main" style="text-align: center;">
                <div>
                    <p style="font-size: 6rem; font-weight: 900; letter-spacing: -0.04em; line-height: 1; margin-bottom: 1rem;">404</p>
                    <p>Page not found. <router-link to="/" class="word" style="text-decoration-color: #000;">Go home</router-link></p>
                </div>
            </div>
            <div class="footer">
                <span>lulzx</span>
                <div class="footer-links">
                    <router-link to="/garden">garden map</router-link>
                    <a href="#" @click.prevent="wander">wander</a>
                </div>
            </div>
        </div>
    `,
    methods: {
        wander() {
            const words = ALL_WORDS();
            const word = words[Math.floor(Math.random() * words.length)];
            this.$router.push('/words/' + word);
        }
    }
};

// Router
const router = createRouter({
    history: createWebHistory(),
    routes: [
        { path: '/', component: Home },
        { path: '/words/:word', component: WordPage },
        { path: '/notes/:noteId', component: NotePage },
        { path: '/garden', component: GardenMap },
        { path: '/:pathMatch(.*)*', component: NotFound }
    ],
    scrollBehavior() {
        return { top: 0 };
    }
});

// Expose router for inline links
window.__gardenRouter = router;

// Root App component
const App = {
    template: `<router-view></router-view>`
};

// App
const app = createApp(App);
app.use(router);
app.mount('#app');
</script>
</body>
</html>
