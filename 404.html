<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>lulzx</title>
<script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
<script src="https://unpkg.com/vue-router@4/dist/vue-router.global.js"></script>
<style>
:root {
    --gray-subtle: #e5e5e5;
    --gray-mid: #999;
    --gray-light: #f5f5f5;
}

* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

::selection {
    background: #000;
    color: #fff;
}

html {
    font-size: 16px;
}

body {
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
    background: #fff;
    color: #000;
    line-height: 1.6;
    min-height: 100vh;
}

.container {
    min-height: 100vh;
    display: flex;
    flex-direction: column;
    border: 2px solid #000;
    margin: 1rem;
}

.main {
    flex: 1;
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 4rem 6rem;
    border-bottom: 2px solid #000;
}

.statement {
    font-size: clamp(1.5rem, 4vw, 3.5rem);
    font-weight: 500;
    max-width: 1200px;
    letter-spacing: -0.03em;
    line-height: 1.45;
    text-wrap: balance;
}

.word {
    display: inline-block;
    cursor: pointer;
    padding: 0 0.1em;
    margin: 0 -0.1em;
    border-radius: 0;
    transition: all 0.15s ease;
    text-decoration: none;
    color: inherit;
    text-decoration-line: underline;
    text-decoration-color: var(--gray-subtle);
    text-underline-offset: 3px;
    text-decoration-thickness: 1px;
}

.word:hover {
    background: #000;
    color: #fff;
    text-decoration: none;
    transform: scale(1.02);
}

.punctuation {
    display: inline;
}

.footer {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 1rem 2rem;
    font-size: 0.875rem;
    border-top: 2px solid #000;
}

.footer a {
    color: #000;
    text-decoration: underline;
    text-underline-offset: 2px;
}

.footer a:hover {
    background: #000;
    color: #fff;
    text-decoration: none;
}

.footer-links {
    display: flex;
    gap: 1rem;
    flex-wrap: wrap;
}

/* Word Page Styles */
.word-page {
    flex: 1;
    border: 2px solid #000;
    margin: 1rem;
    display: flex;
    flex-direction: column;
    animation: fadeIn 0.3s ease;
}

@keyframes fadeIn {
    from { opacity: 0; transform: translateY(10px); }
    to { opacity: 1; transform: translateY(0); }
}

@keyframes blockIn {
    from { opacity: 0; transform: translateY(16px); }
    to { opacity: 1; transform: translateY(0); }
}

.word-header {
    padding: 1.5rem 2rem;
    border-bottom: 2px solid #000;
    display: flex;
    justify-content: space-between;
    align-items: center;
}

.word-header-left {
    display: flex;
    align-items: center;
    gap: 1rem;
}

.breadcrumbs {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    font-size: 0.8rem;
    color: var(--gray-mid);
}

.breadcrumbs a {
    color: var(--gray-mid);
    text-decoration: none;
}

.breadcrumbs a:hover {
    color: #000;
}

.breadcrumbs .sep {
    font-size: 0.7rem;
}

.back {
    color: #000;
    text-decoration: none;
    font-size: 0.875rem;
}

.back:hover {
    background: #000;
    color: #fff;
}

.word-title-section {
    padding: 3rem 4rem;
    border-bottom: 2px solid #000;
    display: flex;
    align-items: baseline;
    gap: 1.5rem;
    flex-wrap: wrap;
}

.word-title {
    font-size: clamp(3rem, 10vw, 8rem);
    font-weight: 700;
    letter-spacing: -0.04em;
    line-height: 1;
}

.stage-badge {
    display: inline-block;
    font-size: 0.75rem;
    text-transform: uppercase;
    letter-spacing: 0.12em;
    padding: 0.25rem 0.75rem;
    vertical-align: middle;
}

.stage-seed {
    border: 1px dashed #000;
}

.stage-sprout {
    border: 2px solid #000;
}

.stage-evergreen {
    border: 4px double #000;
}

.word-meta {
    font-size: 0.8rem;
    color: var(--gray-mid);
    padding: 0.75rem 4rem;
    border-bottom: 1px solid var(--gray-subtle);
    display: flex;
    gap: 2rem;
}

.word-content {
    flex: 1;
    padding: 3rem 4rem;
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
    gap: 2rem;
    align-content: start;
}

.block {
    border: 2px solid #000;
    padding: 2rem;
    transition: transform 0.2s ease, box-shadow 0.2s ease;
    animation: blockIn 0.4s ease both;
}

.block:nth-child(1) { animation-delay: 0s; }
.block:nth-child(2) { animation-delay: 0.05s; }
.block:nth-child(3) { animation-delay: 0.1s; }
.block:nth-child(4) { animation-delay: 0.15s; }
.block:nth-child(5) { animation-delay: 0.2s; }
.block:nth-child(6) { animation-delay: 0.25s; }

.block:hover {
    transform: translateY(-2px);
    box-shadow: 4px 4px 0 #000;
}

.block h2 {
    font-size: 0.875rem;
    text-transform: uppercase;
    letter-spacing: 0.1em;
    margin-bottom: 1rem;
    padding-bottom: 1rem;
    border-bottom: 1px solid #000;
}

.block p, .block li {
    font-size: 1rem;
    line-height: 1.7;
    margin-bottom: 0.75rem;
}

.block ul {
    list-style: none;
    padding: 0;
}

.block li::before {
    content: "\2192  ";
    font-weight: 700;
}

.block a {
    color: #000;
    text-decoration: underline;
}

.block a:hover {
    background: #000;
    color: #fff;
}

.block-inverted {
    background: #000;
    color: #fff;
    border-color: #000;
}

.block-inverted h2 {
    border-bottom-color: #fff;
}

.block-inverted a {
    color: #fff;
}

.block-inverted a:hover {
    background: #fff;
    color: #000;
}

.stat {
    font-size: 4rem;
    font-weight: 700;
    margin-bottom: 0.5rem;
}

.stat-label {
    font-size: 0.875rem;
    text-transform: uppercase;
    letter-spacing: 0.1em;
}

.zero {
    font-size: 8rem;
    font-weight: 900;
    line-height: 1;
}

.block-zero {
    grid-column: 1 / -1;
}

code {
    font-family: "Courier New", monospace;
    background: var(--gray-light);
    padding: 0.2em 0.4em;
    font-size: 0.9em;
}

/* Connections Section */
.connections-section,
.notes-section {
    padding: 2rem 4rem;
    border-top: 2px solid #000;
}

.section-title {
    font-size: 0.875rem;
    text-transform: uppercase;
    letter-spacing: 0.1em;
    margin-bottom: 1.25rem;
}

.chips {
    display: flex;
    flex-wrap: wrap;
    gap: 0.5rem;
}

.chip {
    display: inline-block;
    padding: 0.4rem 1rem;
    border: 2px solid #000;
    text-decoration: none;
    color: #000;
    font-size: 0.875rem;
    transition: all 0.15s ease;
    letter-spacing: -0.01em;
}

.chip:hover {
    background: #000;
    color: #fff;
    transform: translateY(-2px);
    box-shadow: 2px 2px 0 #000;
}

.note-link {
    display: block;
    padding: 1rem 1.5rem;
    border: 2px solid #000;
    text-decoration: none;
    color: #000;
    margin-bottom: 0.5rem;
    transition: all 0.15s ease;
    font-size: 0.95rem;
}

.note-link:hover {
    transform: translateX(4px);
    box-shadow: 2px 2px 0 #000;
}

.note-link .note-link-title {
    font-weight: 600;
}

.note-link .note-link-stage {
    font-size: 0.75rem;
    color: var(--gray-mid);
    text-transform: uppercase;
    letter-spacing: 0.08em;
    margin-left: 0.75rem;
}

.wander-section {
    padding: 1.5rem 4rem;
    border-top: 2px solid #000;
    display: flex;
    justify-content: flex-end;
}

.wander-btn {
    color: #000;
    text-decoration: none;
    font-size: 0.875rem;
    text-decoration: underline;
    text-decoration-style: dashed;
    text-underline-offset: 3px;
    padding: 0.25rem 0.5rem;
    transition: all 0.15s ease;
    cursor: pointer;
    background: none;
    border: none;
    font-family: inherit;
}

.wander-btn:hover {
    background: #000;
    color: #fff;
    text-decoration: none;
}

/* Inline word link */
.inline-word-link {
    color: #000;
    text-decoration: underline;
    text-decoration-color: var(--gray-subtle);
    text-underline-offset: 2px;
    text-decoration-thickness: 1px;
    transition: all 0.1s ease;
}

.inline-word-link:hover {
    background: #000;
    color: #fff;
    text-decoration: none;
}

/* Note Page Styles */
.note-page {
    flex: 1;
    border: 2px solid #000;
    margin: 1rem;
    display: flex;
    flex-direction: column;
    animation: fadeIn 0.3s ease;
}

.note-header {
    padding: 3rem 4rem;
    border-bottom: 2px solid #000;
}

.note-title {
    font-size: clamp(2rem, 5vw, 3.5rem);
    font-weight: 700;
    letter-spacing: -0.03em;
    line-height: 1.15;
    margin-bottom: 1rem;
}

.note-meta {
    font-size: 0.8rem;
    color: var(--gray-mid);
    display: flex;
    gap: 2rem;
    align-items: center;
}

.note-body {
    padding: 3rem 4rem;
    max-width: 760px;
    font-size: 1.05rem;
    line-height: 1.8;
    border-bottom: 2px solid #000;
}

.note-body p {
    margin-bottom: 1.5rem;
}

.note-body h2 {
    font-size: 1.25rem;
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 0.05em;
    margin-top: 3rem;
    margin-bottom: 1rem;
    padding-bottom: 0.75rem;
    border-bottom: 1px solid #000;
}

.note-body ul, .note-body ol {
    margin-bottom: 1.5rem;
    padding-left: 1.5rem;
}

.note-body li {
    margin-bottom: 0.5rem;
}

.note-body blockquote {
    border-left: 4px solid #000;
    padding-left: 1.5rem;
    margin: 2rem 0;
    font-style: italic;
    color: var(--gray-mid);
    font-size: 1.1rem;
}

.note-body strong {
    font-weight: 700;
}

.note-body pre {
    background: #000;
    color: #fff;
    padding: 1.5rem;
    margin: 1.5rem 0;
    overflow-x: auto;
    font-size: 0.9rem;
    line-height: 1.6;
    border: 2px solid #000;
}

.note-body pre code {
    background: none;
    color: #fff;
    padding: 0;
    font-size: inherit;
}

.note-body code {
    font-family: "Courier New", monospace;
    background: var(--gray-light);
    padding: 0.15em 0.4em;
    font-size: 0.9em;
    border: 1px solid var(--gray-subtle);
}

.note-connections {
    padding: 2rem 4rem;
    border-bottom: 2px solid #000;
}

.note-related {
    padding: 2rem 4rem;
    border-bottom: 2px solid #000;
}

/* Garden Map Styles */
.garden-page {
    flex: 1;
    border: 2px solid #000;
    margin: 1rem;
    display: flex;
    flex-direction: column;
    animation: fadeIn 0.3s ease;
}

.garden-header {
    padding: 3rem 4rem;
    border-bottom: 2px solid #000;
}

.garden-title {
    font-size: clamp(2.5rem, 6vw, 5rem);
    font-weight: 700;
    letter-spacing: -0.04em;
    line-height: 1;
    margin-bottom: 1rem;
}

.garden-subtitle {
    font-size: 1rem;
    color: var(--gray-mid);
    max-width: 500px;
}

.garden-filters {
    padding: 1.25rem 4rem;
    border-bottom: 2px solid #000;
    display: flex;
    gap: 0.5rem;
    flex-wrap: wrap;
}

.filter-btn {
    padding: 0.35rem 1rem;
    border: 2px solid #000;
    background: #fff;
    color: #000;
    font-family: inherit;
    font-size: 0.8rem;
    text-transform: uppercase;
    letter-spacing: 0.08em;
    cursor: pointer;
    transition: all 0.15s ease;
}

.filter-btn:hover,
.filter-btn.active {
    background: #000;
    color: #fff;
}

.garden-section {
    padding: 2rem 4rem;
    border-bottom: 2px solid #000;
}

.garden-section-title {
    font-size: 0.875rem;
    text-transform: uppercase;
    letter-spacing: 0.1em;
    margin-bottom: 1.5rem;
    padding-bottom: 0.75rem;
    border-bottom: 1px solid #000;
}

.garden-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
    gap: 0.75rem;
}

.garden-card {
    border: 2px solid #000;
    padding: 1rem 1.25rem;
    text-decoration: none;
    color: #000;
    transition: all 0.15s ease;
    display: flex;
    flex-direction: column;
    gap: 0.5rem;
    animation: blockIn 0.3s ease both;
}

.garden-card:nth-child(1) { animation-delay: 0s; }
.garden-card:nth-child(2) { animation-delay: 0.02s; }
.garden-card:nth-child(3) { animation-delay: 0.04s; }
.garden-card:nth-child(4) { animation-delay: 0.06s; }
.garden-card:nth-child(5) { animation-delay: 0.08s; }
.garden-card:nth-child(6) { animation-delay: 0.1s; }
.garden-card:nth-child(7) { animation-delay: 0.12s; }
.garden-card:nth-child(8) { animation-delay: 0.14s; }
.garden-card:nth-child(9) { animation-delay: 0.16s; }
.garden-card:nth-child(10) { animation-delay: 0.18s; }
.garden-card:nth-child(11) { animation-delay: 0.2s; }
.garden-card:nth-child(12) { animation-delay: 0.22s; }

.garden-card:hover {
    transform: translateY(-2px);
    box-shadow: 4px 4px 0 #000;
}

.garden-card-name {
    font-weight: 700;
    font-size: 1.1rem;
    letter-spacing: -0.02em;
}

.garden-card-meta {
    display: flex;
    justify-content: space-between;
    align-items: center;
    font-size: 0.75rem;
    color: var(--gray-mid);
}

.stage-dot {
    display: inline-block;
    width: 8px;
    height: 8px;
    border-radius: 50%;
    vertical-align: middle;
}

.stage-dot-seed {
    border: 1px dashed #000;
    background: transparent;
}

.stage-dot-sprout {
    border: 1.5px solid #000;
    background: transparent;
}

.stage-dot-evergreen {
    background: #000;
}

.garden-notes-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
    gap: 0.75rem;
}

.garden-note-card {
    border: 2px solid #000;
    padding: 1.25rem 1.5rem;
    text-decoration: none;
    color: #000;
    transition: all 0.15s ease;
    animation: blockIn 0.3s ease both;
}

.garden-note-card:hover {
    transform: translateX(4px);
    box-shadow: 2px 2px 0 #000;
}

.garden-note-title {
    font-weight: 700;
    font-size: 1rem;
    margin-bottom: 0.5rem;
    letter-spacing: -0.01em;
}

.garden-note-meta {
    font-size: 0.75rem;
    color: var(--gray-mid);
    display: flex;
    gap: 1rem;
    align-items: center;
}

/* Responsive */
@media (max-width: 800px) {
    .main {
        padding: 3rem;
    }
    .word-title-section {
        padding: 2rem 2.5rem;
    }
    .word-content,
    .connections-section,
    .notes-section,
    .wander-section,
    .note-header,
    .note-body,
    .note-connections,
    .note-related,
    .garden-header,
    .garden-filters,
    .garden-section {
        padding-left: 2.5rem;
        padding-right: 2.5rem;
    }
    .word-meta {
        padding-left: 2.5rem;
        padding-right: 2.5rem;
    }
}

@media (max-width: 500px) {
    .container {
        margin: 0.5rem;
    }
    .main {
        padding: 1.5rem;
    }
    .footer {
        flex-direction: column;
        gap: 0.75rem;
        text-align: center;
    }
    .footer-links {
        justify-content: center;
    }
    .word-title-section {
        padding: 1.5rem;
    }
    .word-title {
        font-size: clamp(2.5rem, 15vw, 5rem);
    }
    .word-content,
    .connections-section,
    .notes-section,
    .wander-section,
    .note-header,
    .note-body,
    .note-connections,
    .note-related,
    .garden-header,
    .garden-filters,
    .garden-section {
        padding-left: 1.5rem;
        padding-right: 1.5rem;
    }
    .word-meta {
        padding-left: 1.5rem;
        padding-right: 1.5rem;
        flex-wrap: wrap;
        gap: 0.5rem;
    }
    .word-content {
        grid-template-columns: 1fr;
    }
    .garden-grid {
        grid-template-columns: repeat(auto-fill, minmax(140px, 1fr));
    }
    .garden-notes-grid {
        grid-template-columns: 1fr;
    }
    .breadcrumbs {
        display: none;
    }
    .word-header {
        padding: 1rem 1.5rem;
    }
    .note-meta {
        flex-wrap: wrap;
        gap: 0.5rem;
    }
}
</style>
</head>
<body>
<div id="app"></div>

<script>
const { createApp, computed, ref, watch, onMounted } = Vue;
const { createRouter, createWebHistory, useRoute, useRouter } = VueRouter;

// Grammar words to skip for inline linking
const SKIP_WORDS = new Set(['the', 'of', 'at', 'and', 'that', 'not', 'just', 'where']);

// All word keys for wander
const ALL_WORDS = () => Object.keys(wordData);

// Time ago helper
function timeAgo(dateStr) {
    if (!dateStr) return '';
    const [y, m] = dateStr.split('-').map(Number);
    const planted = new Date(y, m - 1);
    const now = new Date();
    const months = (now.getFullYear() - planted.getFullYear()) * 12 + (now.getMonth() - planted.getMonth());
    if (months < 1) return 'this month';
    if (months === 1) return '1 month ago';
    if (months < 12) return months + ' months ago';
    const years = Math.floor(months / 12);
    if (years === 1) return '1 year ago';
    return years + ' years ago';
}

// Breadcrumb trail
function getTrail() {
    try {
        return JSON.parse(sessionStorage.getItem('garden-trail') || '[]');
    } catch { return []; }
}
function addToTrail(word) {
    let trail = getTrail();
    trail = trail.filter(w => w !== word);
    trail.push(word);
    if (trail.length > 5) trail = trail.slice(-5);
    sessionStorage.setItem('garden-trail', JSON.stringify(trail));
}

// Word data store
const wordData = {
    building: {
        related: ['systems', 'source', 'adapt', 'from'],
        stage: 'evergreen',
        planted: '2017-01',
        tended: '2025-12',
        blocks: [
            {
                title: "Current Projects",
                items: [
                    "copilot — CLI Copilot in Rust",
                    "orbit — Spatial Terminal Dashboard",
                    "speculative-decoding — Fast LLM on Apple Silicon",
                    "paddleocr-vl.swift — OCR with MLX",
                    "tanstack-bun — SSR with Bun"
                ]
            },
            {
                title: "Focus Areas",
                items: [
                    "ML Inference — MLX-Swift, Apple Silicon",
                    "Developer Tools — Rust CLI, TUIs",
                    "Web & Graphics — WebGL2/WebGPU",
                    "Automation — Telegram bots"
                ]
            },
            {
                title: "Stats",
                items: [
                    "30+ public repositories",
                    "9 languages",
                    "First commit: 2017",
                    "7+ years shipping code"
                ]
            }
        ]
    },
    at: {
        related: ['from', 'building', 'the'],
        stage: 'seed',
        planted: '2025-01',
        tended: '2025-01',
        blocks: [
            { title: "Location", text: "Software engineer from India. Building developer tools, ML inference systems, and automation that works." }
        ]
    },
    the: {
        related: ['of', 'and'],
        stage: 'seed',
        planted: '2025-01',
        tended: '2025-01',
        blocks: [
            { title: "Definite Article", text: "The most common word in English. Used here to specify a particular intersection." }
        ]
    },
    intersection: {
        related: ['computation', 'cognition', 'first', 'principles'],
        stage: 'sprout',
        planted: '2024-06',
        tended: '2025-06',
        blocks: [
            { title: "Where Fields Meet", text: "The space where computation, cognition, and first principles overlap. This intersection is where novel insights emerge." },
            {
                title: "Cross-Disciplinary Insights",
                items: ["Neural computation theory", "Cognitive architectures", "Verified AI systems", "Principled machine learning"]
            }
        ]
    },
    of: {
        related: ['the', 'and', 'at'],
        stage: 'seed',
        planted: '2025-01',
        tended: '2025-01',
        blocks: [
            { title: "Preposition", text: "Expressing the relationship between a part and a whole. The intersection is composed of these elements." }
        ]
    },
    computation: {
        related: ['cognition', 'systems', 'parallel', 'runtimes', 'execute', 'reason'],
        stage: 'evergreen',
        planted: '2020-03',
        tended: '2025-12',
        blocks: [
            { title: "ML Inference", text: "Making LLMs run fast on consumer hardware. Native Swift implementations using MLX for Apple Silicon." },
            {
                title: "Projects",
                items: ["speculative-decoding — MLX-Swift port", "nano-reasoning — FastRL on Apple Silicon", "paddleocr-vl.swift — 0.9B doc parsing VLM", "masked — Masked diffusion LM"]
            },
            {
                title: "Hardware Targets",
                items: ["Apple Silicon (MLX)", "GPU — WebGL2/WebGPU", "CPU — Rust simd optimization"]
            }
        ]
    },
    cognition: {
        related: ['computation', 'learn', 'adapt', 'reason', 'systems'],
        stage: 'evergreen',
        planted: '2020-06',
        tended: '2025-10',
        blocks: [
            { title: "neurodiverse", text: "Research and Development for AI powered Memory Prosthetics. Exploring how systems can learn and adapt." },
            {
                title: "Memory Systems",
                items: ["Information retrieval", "Similarity search (HNSW)", "Semantic embeddings", "Long-term context"]
            },
            {
                title: "Projects",
                items: ["sentence-similarity-search", "discover — search engine", "masked — diffusion LM"]
            }
        ]
    },
    and: {
        related: ['of', 'the', 'at'],
        stage: 'seed',
        planted: '2025-01',
        tended: '2025-01',
        blocks: [
            { title: "Conjunction", text: "Connects words, phrases, or clauses. Indicates addition or connection between concepts." }
        ]
    },
    first: {
        related: ['principles', 'foundations', 'reason'],
        stage: 'seed',
        planted: '2023-01',
        tended: '2025-06',
        blocks: [
            { title: "First Principles Thinking", text: "Break down problems to their fundamental truths. Build up from there. Don't reason by analogy." },
            {
                title: "Process",
                items: ["Identify the problem", "Break into components", "Find fundamental truths", "Build from ground up", "Verify each step"]
            },
            {
                title: "Applications",
                items: ["Compiler design", "System architecture", "Algorithm invention", "Language creation"]
            }
        ]
    },
    principles: {
        related: ['first', 'minimal', 'foundations', 'verifiable', 'everything'],
        stage: 'evergreen',
        planted: '2023-01',
        tended: '2025-12',
        blocks: [
            { number: "01", title: "Understand Before Building", text: "If you cannot explain it simply, you do not understand it well enough." },
            { number: "02", title: "Dependencies Are Liabilities", text: "Prefer 100 lines of your own code over a dependency you don't fully understand." },
            { number: "03", title: "Simplicity Is Requisite", text: "Complexity is the enemy of reliability." },
            { number: "04", title: "Build for the Long Term", text: "Code should last decades, not quarters." }
        ]
    },
    systems: {
        related: ['computation', 'building', 'minimal', 'runtimes', 'parallel', 'everything'],
        stage: 'evergreen',
        planted: '2017-01',
        tended: '2025-12',
        blocks: [
            { stat: "7+", label: "Years Shipping", text: "Software engineer from India. Building developer tools, ML inference systems, and automation that works." },
            {
                title: "Systems I Build",
                items: ["ML inference on Apple Silicon", "Rust CLI tools", "WebGL2/WebGPU rendering", "Telegram automation", "Information retrieval"]
            },
            {
                title: "Properties",
                items: ["Fast — Performance first", "Minimal — Less code, better results", "Reliable — Production tested", "Auditable — Open source"]
            }
        ]
    },
    that: {
        related: ['systems', 'learn'],
        stage: 'seed',
        planted: '2025-01',
        tended: '2025-01',
        blocks: [
            { title: "Subordinating Conjunction", text: "Introduces a subordinate clause expressing a statement. Connects the systems to their capabilities." }
        ]
    },
    learn: {
        related: ['adapt', 'reason', 'cognition', 'systems'],
        stage: 'evergreen',
        planted: '2017-01',
        tended: '2025-12',
        blocks: [
            {
                title: "Timeline",
                items: ["2024 — MLX-Swift & Apple Silicon", "2023 — Rust & Developer Tools", "2020 — Information Retrieval", "2017 — Telegram Bots"]
            },
            {
                title: "Languages",
                items: ["Rust — Systems & CLI", "Swift — Native & ML", "TypeScript — Web", "Python — Prototyping"]
            },
            {
                title: "Stack",
                items: ["Node.js / Bun", "React / Svelte / Vue", "PostgreSQL / Redis", "Docker / AWS / Cloudflare"]
            }
        ]
    },
    adapt: {
        related: ['learn', 'reason', 'cognition', 'building'],
        stage: 'evergreen',
        planted: '2017-01',
        tended: '2025-12',
        blocks: [
            { title: "Evolution", text: "2017: Telegram bots. 2020: Information retrieval. 2023: Rust & systems. 2024: MLX & Apple Silicon. Always adapting." },
            {
                title: "Services",
                items: ["Product Development — MVPs to production", "Architecture — APIs, databases, infra", "Performance — Optimization & caching", "Emergencies — Crisis response"]
            },
            { title: "Hire", text: "Available for contract work at $1,000/day. Book a 30min call to discuss your project." }
        ]
    },
    reason: {
        related: ['learn', 'adapt', 'cognition', 'computation', 'first'],
        stage: 'evergreen',
        planted: '2024-01',
        tended: '2025-12',
        blocks: [
            { title: "nano-reasoning", text: "High-performance port of FastRL to Apple Silicon using MLX-Swift. Reasoning models that run locally on consumer hardware." },
            {
                title: "Research",
                items: ["FastRL inference optimization", "On-device reasoning", "Speculative decoding for reasoning"]
            },
            { title: "Goal", text: "Systems that understand what they're doing, not just pattern match. Local, private, fast reasoning." }
        ]
    },
    not: {
        related: ['just', 'execute'],
        stage: 'seed',
        planted: '2025-01',
        tended: '2025-01',
        blocks: [
            { title: "Negation", text: "The most important word in logic. Systems that reason, not just execute." },
            {
                title: "What I Don't Do",
                items: ["Enterprise consulting", "Blockchain/Web3", "Mobile app development", "Legacy system maintenance"]
            }
        ]
    },
    just: {
        related: ['not', 'execute'],
        stage: 'seed',
        planted: '2025-01',
        tended: '2025-01',
        blocks: [
            { title: "Merely / Only", text: "Used to minimize or dismiss. 'Just execute' — the bare minimum. We aim higher than just execution." }
        ]
    },
    execute: {
        related: ['not', 'just', 'runtimes', 'computation'],
        stage: 'sprout',
        planted: '2024-03',
        tended: '2025-08',
        blocks: [
            { title: "Beyond Execution", text: "Current software merely executes. The goal is systems that understand what they are doing." },
            {
                title: "Execution Models",
                items: ["Von Neumann: Sequential", "Dataflow: Demand-driven", "Interaction nets: Parallel rewriting", "GPU: SIMD execution"]
            },
            { title: "Performance", text: "Execution speed matters, but correctness matters more. Fast wrong answers are useless." }
        ]
    },
    verifiable: {
        related: ['foundations', 'principles', 'auditable', 'source'],
        stage: 'evergreen',
        planted: '2023-06',
        tended: '2025-10',
        blocks: [
            { check: "\u2713", title: "Formal Verification", text: "Mathematical proofs of correctness. No testing can prove absence of bugs, but proofs can." },
            {
                title: "Techniques",
                items: ["Type systems as proofs", "Model checking", "SMT solvers", "Interactive theorem proving"]
            },
            {
                title: "Projects",
                items: ["verified-zig: Proven allocator", "safe-ir: Verified intermediate rep", "types-rs: Rust type checker proof"]
            }
        ]
    },
    foundations: {
        related: ['first', 'principles', 'verifiable', 'computation'],
        stage: 'evergreen',
        planted: '2023-01',
        tended: '2025-10',
        blocks: [
            {
                title: "Mathematical Base",
                items: ["Type theory: The language of structure", "Category theory: Abstract patterns", "Topology: Continuous reasoning", "Logic: Truth and consequence"]
            },
            {
                title: "Computing Base",
                items: ["Lambda calculus: Universal computation", "Combinatory logic: Variable-free", "Interaction nets: Parallel models", "Assembly: The metal"]
            },
            { title: "Philosophy", text: "Build from bedrock. Understand the ground beneath your feet." }
        ]
    },
    massively: {
        related: ['parallel', 'runtimes', 'computation', 'systems'],
        stage: 'sprout',
        planted: '2024-01',
        tended: '2025-06',
        blocks: [
            { number: "10\u2076", title: "Parallel Units", text: "Modern GPUs execute millions of threads simultaneously." },
            {
                title: "Scale Targets",
                items: ["GPU: 10,000+ cores", "CPU: 64+ threads", "Cluster: 1000+ nodes", "Edge: 100+ devices"]
            }
        ]
    },
    parallel: {
        related: ['massively', 'runtimes', 'computation'],
        stage: 'sprout',
        planted: '2024-01',
        tended: '2025-08',
        blocks: [
            { title: "MLX Parallelism", text: "Apple Silicon unified memory architecture allows efficient parallel computation." },
            { title: "paragon", text: "Provably correct, high-performance model training using Bend's massively parallel capabilities." },
            {
                title: "Hardware",
                items: ["Apple Neural Engine", "GPU compute shaders", "Multi-core CPU"]
            }
        ]
    },
    runtimes: {
        related: ['parallel', 'massively', 'computation', 'systems', 'execute'],
        stage: 'sprout',
        planted: '2023-06',
        tended: '2025-10',
        blocks: [
            { title: "Custom Runtimes", text: "Execution environments designed for specific computational models. Specialized for efficiency and correctness." },
            {
                title: "Implementations",
                items: ["inets: Interaction net runtime", "tensor-rt: GPU compute runtime", "wasm-kernel: Browser runtime", "predictive-rt: Inference engine"]
            },
            {
                title: "Design Goals",
                items: ["Minimal overhead", "Predictable performance", "No garbage collection", "Static memory"]
            }
        ]
    },
    everything: {
        related: ['minimal', 'systems', 'principles'],
        stage: 'sprout',
        planted: '2024-01',
        tended: '2025-06',
        blocks: [
            { title: "Universal Application", text: "These principles apply to all systems. No exceptions." },
            { title: "Scope", text: "Code, documentation, tests, processes. Everything is subject to the same standards." }
        ]
    },
    minimal: {
        related: ['everything', 'small', 'footprint', 'zero', 'dependencies', 'principles'],
        stage: 'evergreen',
        planted: '2020-01',
        tended: '2025-12',
        blocks: [
            { title: "Philosophy", text: "Every line of code is a liability. Fewer dependencies, simpler architectures, less to break." },
            {
                title: "Writing",
                items: ["The case for minimal software", "Shipping fast without breaking things"]
            },
            {
                title: "Principles",
                items: ["Every feature earns its place", "Question every dependency", "Remove before you add", "Complexity is a last resort"]
            }
        ]
    },
    small: {
        related: ['minimal', 'footprint', 'zero'],
        stage: 'sprout',
        planted: '2023-06',
        tended: '2025-06',
        blocks: [
            {
                title: "Size Metrics",
                items: ["Lines of code", "Binary size", "Memory footprint", "API surface", "Dependency count"]
            },
            { title: "Why Small Matters", text: "Small systems are comprehensible. They fit in a human mind." }
        ]
    },
    footprint: {
        related: ['small', 'minimal', 'zero'],
        stage: 'sprout',
        planted: '2023-06',
        tended: '2025-08',
        blocks: [
            { stat: "50KB", title: "Binary Size", text: "inets compiles to a 50KB static binary. No external dependencies." },
            {
                title: "Memory Footprint",
                items: ["No garbage collector", "Static allocation where possible", "Predictable memory usage", "No memory leaks"]
            },
            { title: "Environmental Impact", text: "Small software uses less energy. It runs on older hardware. It reduces e-waste." }
        ]
    },
    zero: {
        related: ['dependencies', 'minimal', 'small', 'footprint'],
        stage: 'evergreen',
        planted: '2020-01',
        tended: '2025-12',
        blocks: [
            { zero: true, title: "Zero Dependencies", text: "Each library you add is code you don't control. It can break, have security issues, bloat your bundle." },
            {
                title: "Projects",
                items: ["tanstack-bun — Zero overhead SSR", "orbit — Pure Rust TUI", "copilot — Single binary"]
            },
            { title: "Exceptions", text: "Where possible — practical constraints sometimes require compromise." }
        ]
    },
    dependencies: {
        related: ['zero', 'minimal', 'auditable', 'possible'],
        stage: 'evergreen',
        planted: '2020-01',
        tended: '2025-12',
        blocks: [
            {
                title: "The Dependency Problem",
                items: ["Supply chain attacks (log4j, xz)", "Left-pad incidents", "Version hell", "Audit impossibility"]
            },
            {
                title: "Solutions",
                items: ["Vendor critical code", "Reimplement trivial functions", "Use standard libraries", "Static linking"]
            },
            { title: "Policy", text: "Zero runtime dependencies. Every dependency requires justification." }
        ]
    },
    where: {
        related: ['possible'],
        stage: 'seed',
        planted: '2025-01',
        tended: '2025-01',
        blocks: [
            { title: "Adverb", text: "Indicates the condition under which something applies. Zero dependencies where possible acknowledges practical constraints." }
        ]
    },
    possible: {
        related: ['where', 'dependencies'],
        stage: 'seed',
        planted: '2025-01',
        tended: '2025-01',
        blocks: [
            { title: "Practical Constraints", text: "Ideals are aspirational. Sometimes external constraints require compromises." },
            {
                title: "Acceptable Exceptions",
                items: ["Hardware drivers", "Platform APIs", "Crypto libraries (audited)", "Build tools"]
            }
        ]
    },
    auditable: {
        related: ['source', 'verifiable', 'dependencies'],
        stage: 'evergreen',
        planted: '2020-06',
        tended: '2025-10',
        blocks: [
            { title: "Code You Can Read", text: "Every system I build can be understood by reading the source. I write Rust, Swift, TypeScript, and Python with clarity first." },
            {
                title: "Public Work",
                items: ["github.com/lulzx — 30+ public repos", "CLI tools in Rust", "MLX-Swift inference ports", "Web libraries"]
            },
            { title: "Open Source", text: "Most of my work is open source. 7+ years of shipping code you can inspect." }
        ]
    },
    from: {
        related: ['building', 'source', 'at'],
        stage: 'sprout',
        planted: '2024-01',
        tended: '2025-06',
        blocks: [
            { title: "Origin", text: "Software engineer from India. Building developer tools, ML inference systems, and automation that works." },
            { title: "Location", text: "Based in India, working remotely with teams worldwide. Available for contract work at $1,000/day." },
            {
                title: "History",
                items: ["2017: Started with Telegram bots", "2020: Information retrieval systems", "2023: Rust & developer tools", "2024: MLX-Swift & Apple Silicon"]
            }
        ]
    },
    source: {
        related: ['auditable', 'from', 'building'],
        stage: 'evergreen',
        planted: '2017-01',
        tended: '2025-12',
        blocks: [
            { title: "GitHub", text: "github.com/lulzx — 30+ public repositories. 9 languages. Open source work you can audit, modify, and learn from." },
            {
                title: "Featured Repos",
                items: ["copilot — Rust CLI AI assistant", "orbit — Spatial TUI dashboard", "speculative-decoding — MLX-Swift", "tanstack-bun — SSR framework"]
            },
            { title: "License", text: "Most projects are MIT licensed. Free to use, modify, and distribute." }
        ]
    }
};

// Notes data store
const notesData = {
    'minimal-software': {
        title: 'The case for minimal software',
        stage: 'evergreen',
        planted: '2024-10',
        tended: '2025-06',
        words: ['minimal', 'dependencies', 'small', 'footprint', 'zero', 'everything', 'principles'],
        relatedNotes: ['shipping-fast'],
        content: `<p>Modern software is bloated. A text editor that needs 500MB of RAM. A todo app that ships a full browser engine. A chat client that uses more memory than the operating system.</p>
<p>We\u2019ve normalized this. We\u2019ve accepted that software needs to be slow, heavy, and resource-hungry. But it doesn\u2019t have to be this way.</p>
<h2>The cost of complexity</h2>
<p>Every line of code is a liability. It needs to be written, reviewed, tested, documented, and maintained. It can contain bugs. It can be a security vulnerability. It can slow things down.</p>
<p>The more code you have, the more things can go wrong. The more dependencies you have, the more attack surface you expose. The more features you add, the harder everything becomes.</p>
<blockquote>The best code is no code at all.</blockquote>
<h2>What minimal actually means</h2>
<p>Minimal doesn\u2019t mean incomplete. It doesn\u2019t mean ugly. It doesn\u2019t mean lacking features people actually need.</p>
<p>Minimal means:</p>
<ul><li>Every feature earns its place</li><li>No code exists without a reason</li><li>Complexity is a last resort, not a first choice</li><li>Performance is a feature, not an afterthought</li></ul>
<p>Minimal software does fewer things, but does them well. It starts fast, runs fast, and doesn\u2019t waste resources.</p>
<h2>How to build minimal software</h2>
<p><strong>Start with the problem, not the solution.</strong> Before writing any code, understand what you\u2019re actually trying to solve. Most features exist because someone thought they\u2019d be cool, not because users needed them.</p>
<p><strong>Question every dependency.</strong> Each library you add is code you don\u2019t control. It\u2019s code that can break, that can have security issues, that can bloat your bundle. Only add dependencies that are absolutely necessary.</p>
<p><strong>Build for constraints.</strong> What if your software had to run on a 10-year-old computer? What if it had to load on a slow connection? What if it had to work offline? Constraints force simplicity.</p>
<p><strong>Remove before you add.</strong> Before adding a new feature, ask if you can remove an old one. Before adding complexity, ask if you can simplify what exists. The best refactoring is deletion.</p>
<h2>The benefits</h2>
<p>Minimal software is faster. There\u2019s less code to execute, less data to transfer, less work for the CPU to do.</p>
<p>Minimal software is more reliable. Fewer moving parts means fewer things that can break. Simpler code is easier to understand and easier to fix.</p>
<p>Minimal software is more maintainable. A small codebase is easier to navigate. Changes are easier to make. Onboarding is faster.</p>
<p>Minimal software respects users. It doesn\u2019t waste their time, their battery, their bandwidth. It does what it says and gets out of the way.</p>
<h2>The challenge</h2>
<p>Building minimal software is hard. It\u2019s easier to add than to remove. It\u2019s easier to solve problems with more code than with better code. It\u2019s easier to follow trends than to question them.</p>
<p>But the result is worth it. Software that works. Software that lasts. Software that doesn\u2019t make you wait.</p>
<p>Less code. Fewer features. Better software.</p>`
    },
    'shipping-fast': {
        title: 'Shipping fast without breaking things',
        stage: 'evergreen',
        planted: '2025-12',
        tended: '2025-12',
        words: ['systems', 'building', 'adapt', 'execute', 'minimal', 'principles'],
        relatedNotes: ['minimal-software'],
        content: `<p>There\u2019s a common belief that you have to choose between speed and quality. Move fast and break things, or move slowly and build something solid. I don\u2019t think that\u2019s true.</p>
<p>The fastest teams I\u2019ve worked with also had the fewest bugs. The slowest had the most. Speed and quality aren\u2019t opposites\u2014they\u2019re correlated. Here\u2019s what I\u2019ve learned.</p>
<h2>Small changes, always</h2>
<p>Big changes are slow changes. They take longer to write, longer to review, longer to test, and longer to fix when they break. Small changes ship faster and break less.</p>
<p>If your PR is more than 200 lines, it\u2019s probably too big. Split it up. Ship the parts that work. Iterate.</p>
<h2>Test the right things</h2>
<p>100% code coverage is a vanity metric. What matters is testing the things that actually break:</p>
<ul><li>Integration points between systems</li><li>Edge cases in business logic</li><li>User-facing flows that can\u2019t be easily fixed</li></ul>
<p>Skip testing the things that are obvious, easy to fix, or change frequently. Your time is better spent elsewhere.</p>
<h2>Deploy constantly</h2>
<p>The longer code sits undeployed, the scarier it becomes to deploy. Deploy every day. Deploy multiple times a day. Make deployment boring.</p>
<p>When deployments are routine, failures are small. When they\u2019re rare, failures are catastrophic.</p>
<h2>Fix fast, not perfect</h2>
<p>When something breaks, the goal is to stop the bleeding, not to solve world hunger. Fix the immediate problem. Ship the fix. Then figure out the root cause.</p>
<p>A quick fix that stops the bleeding is better than a perfect fix that takes three days.</p>
<h2>Keep it simple</h2>
<p>Simple code ships faster because it\u2019s easier to understand, easier to review, and easier to debug. Every abstraction you add is something that can break.</p>
<p>Before adding complexity, ask: is this actually necessary? Usually the answer is no.</p>
<p>Speed isn\u2019t about working more hours or cutting corners. It\u2019s about doing less unnecessary work. Build only what\u2019s needed. Test only what matters. Keep everything as simple as possible.</p>
<p>That\u2019s how you ship fast without breaking things.</p>`
    },
    'telegram-bots': {
        title: 'Building Telegram bots that scale',
        stage: 'evergreen',
        planted: '2024-06',
        tended: '2025-03',
        words: ['systems', 'building', 'adapt', 'learn', 'dependencies', 'runtimes'],
        relatedNotes: ['shipping-fast', 'minimal-software'],
        content: `<p>I\u2019ve been building Telegram bots since 2017. Started with simple ones\u2014reply to a command, send a message. Now some of them handle millions of messages per day.</p>
<p>Here\u2019s what I\u2019ve learned about making bots that actually scale.</p>
<h2>Use webhooks, not polling</h2>
<p>Long polling is fine for development. For production, use webhooks. The difference is simple: with polling, your bot constantly asks Telegram \u201cany new messages?\u201d With webhooks, Telegram pushes updates to you instead of you constantly asking for them.</p>
<p>Set up a proper webhook endpoint. Use HTTPS. Handle errors gracefully. Your server will thank you.</p>
<h2>Process messages asynchronously</h2>
<p>Don\u2019t process messages in the webhook handler. Accept the message, queue it, and return immediately. Process the queue in background workers.</p>
<p>This does a few things:</p>
<ul><li>Telegram doesn\u2019t time out waiting for your response</li><li>You can retry failed messages without losing them</li><li>You can scale workers independently of your webhook server</li></ul>
<p>Redis queues work great for this. Simple, fast, and battle-tested.</p>
<h2>Rate limit everything</h2>
<p>Telegram has rate limits. Your APIs have rate limits. Your database has practical limits. Respect all of them.</p>
<p>Build rate limiting into your bot from day one. Per-user limits. Per-chat limits. Global limits. It\u2019s much easier to relax limits later than to add them when you\u2019re getting hammered.</p>
<h2>Cache aggressively</h2>
<p>User info doesn\u2019t change often. Chat metadata doesn\u2019t change often. Cache them. A simple Redis cache with a 5-minute TTL can eliminate most of your API calls.</p>
<p>Just remember to invalidate the cache when things actually change.</p>
<h2>Handle errors gracefully</h2>
<p>Bots fail. APIs timeout. Messages get lost. Build for failure.</p>
<ul><li>Retry transient failures with exponential backoff</li><li>Log errors with enough context to debug them</li><li>Tell users when something goes wrong instead of silently failing</li></ul>
<p>A bot that fails gracefully is better than one that fails silently.</p>
<h2>Keep state minimal</h2>
<p>The less state your bot maintains, the easier it is to scale. Avoid storing conversation state if you can. If you must, use a database, not memory.</p>
<p>Stateless bots are horizontally scalable. Stateful bots require careful coordination.</p>
<h2>Monitor everything</h2>
<p>You can\u2019t fix what you can\u2019t see. Track message throughput. Track response times. Track error rates. Set up alerts for anomalies.</p>
<p>When something breaks at 3am, you want to know before your users tell you.</p>
<p>Building scalable bots isn\u2019t rocket science. It\u2019s just applying the same principles that work for any scalable system: async processing, caching, rate limiting, and good monitoring. Get the basics right and your bot will handle whatever Telegram throws at it.</p>`
    },
    'semver-30x-faster': {
        title: 'semver, but 30x faster',
        stage: 'evergreen',
        planted: '2025-12',
        tended: '2025-12',
        words: ['computation', 'minimal', 'zero', 'dependencies', 'small', 'footprint', 'execute'],
        relatedNotes: ['minimal-software'],
        content: `<p>Every <code>npm install</code> parses version strings. Thousands of them. Marvin Hagemeister found that installing preact calls <code>semver</code> 21,000+ times. One package. 21 thousand version comparisons.</p>
<p>The <code>semver</code> package has 150 million weekly downloads. It\u2019s the backbone of npm\u2019s dependency resolution. And it\u2019s doing way more work than it needs to.</p>
<p>Parsing <code>1.2.3</code> should be trivial. Three numbers, two dots. But the official package creates class instances for every parse, uses regex, has a fancy Map-based LRU cache, and re-parses range strings every time you call <code>satisfies()</code>.</p>
<h2>The dumb idea that worked</h2>
<p>Version numbers aren\u2019t random. Most packages never go past major version 50. What if we just precompute all of them?</p>
<pre><code>const cache = Object.create(null);
for (let M = 0; M &lt; 50; M++) {
  for (let m = 0; m &lt; 50; m++) {
    for (let p = 0; p &lt; 20; p++) {
      const s = M + '.' + m + '.' + p;
      cache[s] = { major: M, minor: m, patch: p, pre: null };
    }
  }
}</code></pre>
<p>50,000 version objects. Allocated once at module load. Now parsing any common version is just a hash lookup. No regex. No string splitting. No nothing.</p>
<h2>Compiling ranges to functions</h2>
<p>A version range like <code>^1.2.3</code> means \u201canything >= 1.2.3 and < 2.0.0\u201d. Why not compile it once to a closure?</p>
<pre><code>// ^1.2.3 compiles to:
(M, m, p, pr) =&gt; !pr && M === 1 && ((m - 2) || (p - 3)) >= 0</code></pre>
<p>This closure gets cached. Next time you check any version against <code>^1.2.3</code>, it\u2019s just a function call with four integers. No parsing. No comparisons against parsed objects. Just raw arithmetic.</p>
<h2>Goodbye regex, hello charCodeAt</h2>
<p>For something as simple as parsing <code>1.2.3</code>, regex is overkill. Manual character-by-character parsing wins. <code>charCodeAt</code> returns raw integer ASCII codes, so comparing <code>c >= 48</code> is faster than <code>char >= '0'</code>.</p>
<h2>The results</h2>
<p><strong>parse:</strong> 6M \u2192 208M ops/s (35x). <strong>satisfies:</strong> 2.4M \u2192 70M ops/s (30x). <strong>valid:</strong> 6M \u2192 186M ops/s (31x). <strong>compare:</strong> 7M \u2192 105M ops/s (15x).</p>
<p>208 million parses per second. Version strings. JavaScript.</p>
<h2>Things that didn\u2019t work</h2>
<p>Not everything made things faster. Hash-based cache with fixed array was slower than V8\u2019s internal hash tables. Fast path for simple versions added overhead since the cache lookup was already so fast. Caching <code>inc()</code> results cost more than computing them.</p>
<p>The lesson: benchmark everything. Your intuitions are probably wrong.</p>
<h2>The final stats</h2>
<p><strong>6.4 kB</strong> gzipped (semver is ~17 kB). <strong>Zero dependencies.</strong> <strong>~500 lines</strong> of TypeScript.</p>
<pre><code>npm install pico-semver</code></pre>
<p>Code is on GitHub: <a href="https://github.com/Lulzx/pico-semver">github.com/Lulzx/pico-semver</a></p>`
    }
};

// Get notes that reference a word
function getNotesForWord(word) {
    const results = [];
    for (const [id, note] of Object.entries(notesData)) {
        if (note.words.includes(word)) {
            results.push({ id, ...note });
        }
    }
    return results;
}

// Home component
const Home = {
    template: `
        <div class="container">
            <div class="main">
                <p class="statement">
                    <router-link to="/words/building" class="word">Building</router-link>&nbsp;
                    <router-link to="/words/at" class="word">at</router-link>&nbsp;
                    <router-link to="/words/the" class="word">the</router-link>&nbsp;
                    <router-link to="/words/intersection" class="word">intersection</router-link>&nbsp;
                    <router-link to="/words/of" class="word">of</router-link>&nbsp;
                    <router-link to="/words/computation" class="word">computation</router-link><span class="punctuation">, </span>
                    <router-link to="/words/cognition" class="word">cognition</router-link><span class="punctuation">, </span>
                    <router-link to="/words/and" class="word">and</router-link>&nbsp;
                    <router-link to="/words/first" class="word">first</router-link>&nbsp;
                    <router-link to="/words/principles" class="word">principles</router-link><span class="punctuation">. </span>
                    <router-link to="/words/systems" class="word">Systems</router-link>&nbsp;
                    <router-link to="/words/that" class="word">that</router-link>&nbsp;
                    <router-link to="/words/learn" class="word">learn</router-link><span class="punctuation">, </span>
                    <router-link to="/words/adapt" class="word">adapt</router-link><span class="punctuation">, </span>
                    <router-link to="/words/and" class="word">and</router-link>&nbsp;
                    <router-link to="/words/reason" class="word">reason</router-link>&nbsp;
                    <router-link to="/words/not" class="word">not</router-link>&nbsp;
                    <router-link to="/words/just" class="word">just</router-link>&nbsp;
                    <router-link to="/words/execute" class="word">execute</router-link><span class="punctuation">. </span>
                    <router-link to="/words/verifiable" class="word">Verifiable</router-link>&nbsp;
                    <router-link to="/words/foundations" class="word">foundations</router-link><span class="punctuation">. </span>
                    <router-link to="/words/massively" class="word">Massively</router-link>&nbsp;
                    <router-link to="/words/parallel" class="word">parallel</router-link>&nbsp;
                    <router-link to="/words/runtimes" class="word">runtimes</router-link><span class="punctuation">. </span>
                    <router-link to="/words/everything" class="word">Everything</router-link>&nbsp;
                    <router-link to="/words/minimal" class="word">minimal</router-link><span class="punctuation">: </span>
                    <router-link to="/words/small" class="word">small</router-link>&nbsp;
                    <router-link to="/words/footprint" class="word">footprint</router-link><span class="punctuation">, </span>
                    <router-link to="/words/zero" class="word">zero</router-link>&nbsp;
                    <router-link to="/words/dependencies" class="word">dependencies</router-link>&nbsp;
                    <router-link to="/words/where" class="word">where</router-link>&nbsp;
                    <router-link to="/words/possible" class="word">possible</router-link><span class="punctuation">, </span>
                    <router-link to="/words/auditable" class="word">auditable</router-link>&nbsp;
                    <router-link to="/words/from" class="word">from</router-link>&nbsp;
                    <router-link to="/words/source" class="word">source</router-link><span class="punctuation">.</span>
                </p>
            </div>
            <div class="footer">
                <span>lulzx</span>
                <div class="footer-links">
                    <a href="https://github.com/lulzx">github</a>
                    <a href="mailto:hello@lulzx.dev">email</a>
                    <router-link to="/garden">garden map</router-link>
                    <a href="#" @click.prevent="wander">wander</a>
                </div>
            </div>
        </div>
    `,
    methods: {
        wander() {
            const words = ALL_WORDS();
            const word = words[Math.floor(Math.random() * words.length)];
            this.$router.push('/words/' + word);
        }
    }
};

// Word page component
const WordPage = {
    template: `
        <div class="word-page">
            <div class="word-header">
                <div class="word-header-left">
                    <router-link to="/" class="back">\u2190 back</router-link>
                    <div class="breadcrumbs" v-if="trail.length > 0">
                        <span class="sep">/</span>
                        <template v-for="(crumb, i) in trail" :key="crumb">
                            <router-link :to="'/words/' + crumb">{{ crumb }}</router-link>
                            <span class="sep" v-if="i < trail.length - 1">/</span>
                        </template>
                    </div>
                </div>
                <span style="font-size: 0.875rem;">lulzx</span>
            </div>
            <div class="word-title-section">
                <div class="word-title">{{ wordId }}</div>
                <span v-if="data" class="stage-badge" :class="'stage-' + data.stage">{{ data.stage }}</span>
            </div>
            <div class="word-meta" v-if="data && data.planted">
                <span>planted {{ timeAgo(data.planted) }}</span>
                <span>tended {{ timeAgo(data.tended) }}</span>
            </div>
            <div class="word-content" :key="wordId">
                <div v-for="(block, index) in blocks" :key="index"
                     class="block"
                     :class="{ 'block-inverted': block.stat || block.check, 'block-zero': block.zero }"
                     :style="{ animationDelay: (index * 0.05) + 's' }">
                    <div v-if="block.stat" class="stat">{{ block.stat }}</div>
                    <div v-if="block.zero" class="zero">0</div>
                    <div v-if="block.check" style="font-size: 4rem; margin-bottom: 1rem;">{{ block.check }}</div>
                    <h2 v-if="block.label">{{ block.label }}</h2>
                    <h2 v-else>{{ block.title }}</h2>
                    <p v-if="block.text" v-html="linkifyText(block.text)"></p>
                    <ul v-if="block.items">
                        <li v-for="item in block.items" :key="item" v-html="linkifyText(item)"></li>
                    </ul>
                </div>
            </div>
            <div class="connections-section" v-if="related.length > 0">
                <div class="section-title">Connections</div>
                <div class="chips">
                    <router-link v-for="r in related" :key="r" :to="'/words/' + r" class="chip">{{ r }}</router-link>
                </div>
            </div>
            <div class="notes-section" v-if="notes.length > 0">
                <div class="section-title">Notes</div>
                <router-link v-for="note in notes" :key="note.id" :to="'/notes/' + note.id" class="note-link">
                    <span class="note-link-title">{{ note.title }}</span>
                    <span class="note-link-stage">{{ note.stage }}</span>
                </router-link>
            </div>
            <div class="wander-section">
                <button class="wander-btn" @click="wander">\u2192 wander to a random word</button>
            </div>
        </div>
    `,
    computed: {
        wordId() {
            return this.$route.params.word;
        },
        data() {
            return wordData[this.wordId];
        },
        blocks() {
            return this.data?.blocks || [{ title: "Not Found", text: "This word has no content yet." }];
        },
        related() {
            return this.data?.related || [];
        },
        notes() {
            return getNotesForWord(this.wordId);
        },
        trail() {
            const t = getTrail().filter(w => w !== this.wordId);
            return t.slice(-3);
        }
    },
    methods: {
        timeAgo,
        linkifyText(text) {
            if (!text) return '';
            const wordKeys = ALL_WORDS().filter(w => !SKIP_WORDS.has(w));
            // Sort by length descending so longer words match first
            wordKeys.sort((a, b) => b.length - a.length);
            // Build regex that matches whole words only
            const pattern = new RegExp('\\b(' + wordKeys.map(w => w.replace(/[.*+?^${}()|[\]\\]/g, '\\$&')).join('|') + ')\\b', 'gi');
            return text.replace(pattern, (match) => {
                const lower = match.toLowerCase();
                if (lower === this.wordId) return match; // Don't link to self
                if (wordData[lower]) {
                    return '<a href="/words/' + lower + '" class="inline-word-link" onclick="event.preventDefault(); window.__gardenRouter.push(\'/words/' + lower + '\')">' + match + '</a>';
                }
                return match;
            });
        },
        wander() {
            const words = ALL_WORDS().filter(w => w !== this.wordId);
            const word = words[Math.floor(Math.random() * words.length)];
            this.$router.push('/words/' + word);
        }
    },
    watch: {
        wordId: {
            handler(val) {
                if (val && wordData[val]) {
                    addToTrail(val);
                }
            },
            immediate: true
        }
    }
};

// Note page component
const NotePage = {
    template: `
        <div class="note-page" v-if="note">
            <div class="word-header">
                <router-link to="/" class="back">\u2190 back</router-link>
                <span style="font-size: 0.875rem;">lulzx</span>
            </div>
            <div class="note-header">
                <div class="note-title">{{ note.title }}</div>
                <div class="note-meta">
                    <span class="stage-badge" :class="'stage-' + note.stage">{{ note.stage }}</span>
                    <span>planted {{ timeAgo(note.planted) }}</span>
                    <span>tended {{ timeAgo(note.tended) }}</span>
                </div>
            </div>
            <div class="note-body" v-html="note.content"></div>
            <div class="note-connections" v-if="note.words && note.words.length">
                <div class="section-title">Connected Words</div>
                <div class="chips">
                    <router-link v-for="w in note.words" :key="w" :to="'/words/' + w" class="chip">{{ w }}</router-link>
                </div>
            </div>
            <div class="note-related" v-if="note.relatedNotes && note.relatedNotes.length">
                <div class="section-title">Related Notes</div>
                <router-link v-for="rn in note.relatedNotes" :key="rn" :to="'/notes/' + rn" class="note-link">
                    <span class="note-link-title">{{ getNoteTitle(rn) }}</span>
                </router-link>
            </div>
            <div class="wander-section">
                <button class="wander-btn" @click="wander">\u2192 wander to a random word</button>
            </div>
        </div>
        <div class="word-page" v-else>
            <div class="word-header">
                <router-link to="/" class="back">\u2190 back</router-link>
                <span style="font-size: 0.875rem;">lulzx</span>
            </div>
            <div class="word-title-section">
                <div class="word-title">404</div>
            </div>
            <div class="word-content">
                <div class="block"><h2>Not Found</h2><p>This note doesn't exist. <router-link to="/garden" style="color:#000;text-decoration:underline;">Browse the garden</router-link>.</p></div>
            </div>
        </div>
    `,
    computed: {
        noteId() {
            return this.$route.params.noteId;
        },
        note() {
            return notesData[this.noteId];
        }
    },
    methods: {
        timeAgo,
        getNoteTitle(id) {
            return notesData[id]?.title || id;
        },
        wander() {
            const words = ALL_WORDS();
            const word = words[Math.floor(Math.random() * words.length)];
            this.$router.push('/words/' + word);
        }
    }
};

// Garden map component
const GardenMap = {
    template: `
        <div class="garden-page">
            <div class="word-header">
                <router-link to="/" class="back">\u2190 back</router-link>
                <span style="font-size: 0.875rem;">lulzx</span>
            </div>
            <div class="garden-header">
                <div class="garden-title">Garden Map</div>
                <div class="garden-subtitle">{{ totalWords }} words, {{ totalNotes }} notes. An interconnected web of ideas at various stages of growth.</div>
            </div>
            <div class="garden-filters">
                <button class="filter-btn" :class="{ active: filter === 'all' }" @click="filter = 'all'">All</button>
                <button class="filter-btn" :class="{ active: filter === 'evergreen' }" @click="filter = 'evergreen'">Evergreen</button>
                <button class="filter-btn" :class="{ active: filter === 'sprout' }" @click="filter = 'sprout'">Sprout</button>
                <button class="filter-btn" :class="{ active: filter === 'seed' }" @click="filter = 'seed'">Seed</button>
            </div>
            <div class="garden-section">
                <div class="garden-section-title">Words ({{ filteredWords.length }})</div>
                <div class="garden-grid">
                    <router-link v-for="(w, i) in filteredWords" :key="w.id" :to="'/words/' + w.id" class="garden-card" :style="{ animationDelay: (i * 0.02) + 's' }">
                        <div class="garden-card-name">{{ w.id }}</div>
                        <div class="garden-card-meta">
                            <span><span class="stage-dot" :class="'stage-dot-' + w.stage"></span> {{ w.stage }}</span>
                            <span>{{ w.connections }} links</span>
                        </div>
                    </router-link>
                </div>
            </div>
            <div class="garden-section">
                <div class="garden-section-title">Notes ({{ filteredNotes.length }})</div>
                <div class="garden-notes-grid">
                    <router-link v-for="n in filteredNotes" :key="n.id" :to="'/notes/' + n.id" class="garden-note-card">
                        <div class="garden-note-title">{{ n.title }}</div>
                        <div class="garden-note-meta">
                            <span><span class="stage-dot" :class="'stage-dot-' + n.stage"></span> {{ n.stage }}</span>
                            <span>{{ n.wordCount }} words</span>
                        </div>
                    </router-link>
                </div>
            </div>
            <div class="wander-section">
                <button class="wander-btn" @click="wander">\u2192 wander to a random word</button>
            </div>
        </div>
    `,
    data() {
        return { filter: 'all' };
    },
    computed: {
        totalWords() { return Object.keys(wordData).length; },
        totalNotes() { return Object.keys(notesData).length; },
        allWords() {
            return Object.entries(wordData).map(([id, d]) => ({
                id,
                stage: d.stage,
                connections: (d.related || []).length
            })).sort((a, b) => {
                const order = { evergreen: 0, sprout: 1, seed: 2 };
                return (order[a.stage] - order[b.stage]) || a.id.localeCompare(b.id);
            });
        },
        filteredWords() {
            if (this.filter === 'all') return this.allWords;
            return this.allWords.filter(w => w.stage === this.filter);
        },
        allNotes() {
            return Object.entries(notesData).map(([id, n]) => ({
                id,
                title: n.title,
                stage: n.stage,
                wordCount: n.content.replace(/<[^>]*>/g, '').split(/\s+/).length
            }));
        },
        filteredNotes() {
            if (this.filter === 'all') return this.allNotes;
            return this.allNotes.filter(n => n.stage === this.filter);
        }
    },
    methods: {
        wander() {
            const words = ALL_WORDS();
            const word = words[Math.floor(Math.random() * words.length)];
            this.$router.push('/words/' + word);
        }
    }
};

// 404 component
const NotFound = {
    template: `
        <div class="container">
            <div class="main" style="text-align: center;">
                <div>
                    <p style="font-size: 6rem; font-weight: 900; letter-spacing: -0.04em; line-height: 1; margin-bottom: 1rem;">404</p>
                    <p>Page not found. <router-link to="/" class="word" style="text-decoration-color: #000;">Go home</router-link></p>
                </div>
            </div>
            <div class="footer">
                <span>lulzx</span>
                <div class="footer-links">
                    <router-link to="/garden">garden map</router-link>
                    <a href="#" @click.prevent="wander">wander</a>
                </div>
            </div>
        </div>
    `,
    methods: {
        wander() {
            const words = ALL_WORDS();
            const word = words[Math.floor(Math.random() * words.length)];
            this.$router.push('/words/' + word);
        }
    }
};

// Router
const router = createRouter({
    history: createWebHistory(),
    routes: [
        { path: '/', component: Home },
        { path: '/words/:word', component: WordPage },
        { path: '/notes/:noteId', component: NotePage },
        { path: '/garden', component: GardenMap },
        { path: '/:pathMatch(.*)*', component: NotFound }
    ],
    scrollBehavior() {
        return { top: 0 };
    }
});

// Expose router for inline links
window.__gardenRouter = router;

// Root App component
const App = {
    template: `<router-view></router-view>`
};

// App
const app = createApp(App);
app.use(router);
app.mount('#app');
</script>
</body>
</html>
